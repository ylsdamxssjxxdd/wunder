# 功能迭代

<!-- changelog:start -->
## 2026-02-06
### 新增
- [eva_skills][docs] 新增『wunder智能体开发』技能，提供开发流程、规范要点与网关回路测试脚本
- [backend][gateway][admin] 新增 gateway invoke 管理接口用于触发节点调用回路
- [backend][gateway][ws][admin][tools] 新增网关控制面 WS 入口、节点调用工具与管理接口，支持节点/客户端在线态与调用回执
- [backend][channels][gateway] 新增渠道用户绑定与主线程会话策略
- [backend][frontend][ws][docs] 新增 workspace_update 流式事件并仅在工作区变更时刷新沙盒容器，避免每次消息结束刷新卡顿
- [frontend] 前端新增后端不可用时维护提示页
### 变更
- [frontend] 编辑文件窗口按钮交互改为扁平风格并提升深色主题保存按钮亮度
- [frontend] 扩展沙盒文件图标保留数量（约100个常见类型）
- [frontend] 精简沙盒文件图标资源至常用集合（<=100个）
- [frontend] 用户侧聊天顶部栏隐藏传输切换按钮，智能体标签改为标题下小标题并将通用聊天更名为通用应用
- [backend] 管理员用户取消 max_rounds 限制，工具调用支持无限轮次
### 修复
- [config][i18n] 修复节点调用工具中文文案与配置显示乱码
- [frontend] 修复深色主题编辑窗口保存按钮悬停/按下反馈不明显的问题
- [frontend] 用户侧编辑文件窗口关闭/保存按钮补充悬停与按下交互反馈
- [frontend] 用户侧 workspace-panel 删除确认占位符显示正确文件名，并支持双击文本文件进入编辑
- [frontend] 补全沙盒文件列表常见文件图标资源（vscode-icons）
- [backend] 线程管理统计合并聊天会话 agent_id 并将监控记录补齐 agent_id
- [backend] 补充监控线程记录的 agent_id 并修正线程管理智能体数统计
- [backend] 修复线程管理智能体数统计仅显示默认值的问题
### 文档
- [docs][readme] 更新 README 描述为智能体调度系统并补充用户/管理/网关能力说明
- [docs][channels] 同步渠道用户绑定与主线程策略文档说明
- [docs][gateway] 新增 wunder 网关系统落地方案文档
- [docs] 同步英文会话状态机图，补充 waiting 状态

## 2026-02-05
### 新增
- [backend][frontend][docs] 智能体主线程与队列落地，接口与前端时间线支持主线程设置
- [backend][frontend][docs] 定时任务工具与调度器落地，新增cron API与用户侧管理页

### 变更
- [web] 优化记忆管理页面列表与队列区域的对比度与操作列显示
- [web] 优化线程管理页面表格操作列遮挡与面板对比度
- [web] 优化线程管理页面线程统计表格的扁平与紧凑样式
- [frontend] 时间线为空时显示居中图标
- [frontend] 主线程书签标识阴影增强立体感
- [frontend] 主线程书签标识改为与五角星一致的实色
- [frontend] 主线程书签标识调为淡黄色
- [frontend] 主线程书签标识调为橘色淡透明并移至左侧
- [frontend] 时间线主线程标识改为书签挂带样式并移除文字
- [frontend] 用户侧新建会话改为新建线程，时间线主线程标识改为条目内标签
- [web][backend] 强化线程管理页面：列调整为用户/智能体数/总线程/活动线程/上下文并优化样式
- [web] 管理员侧系统导航顺序调整
- [web] 管理员内部状态工具热力图定时任务图标改为闹钟
- [backend][frontend] 简化定时任务工具提示/返回，优化定时任务页面表格与运行记录滚动
- [backend][ws][docs] WebSocket 增加 connect 协议握手、协议版本/传输策略下发并补充结构化日志
- [backend][cron] 删除会话时级联删除关联定时任务
- [backend][frontend][ws] 聊天 WebSocket 新增 watch 订阅会话事件，用于实时推送后台消息
### 修复
- [backend] 修复流式事件持久化日志的借用生命周期错误
- [backend] 增强LLM与Sandbox响应解析失败处理并补齐LSP/Channels/历史加载错误日志
- [backend] 增强流式事件、日志与会话锁错误日志并收紧配置持久化失败处理
- [backend][queue] 问询面板等待状态视为可继续处理，避免用户选择后被判定会话繁忙进入队列
- [backend][session] 并发请求未提供 session_id 时自动分叉独立会话，避免不同智能体会话互相中止 移除自动结束其他等待问询面板会话的逻辑，避免并发问询被误终止
- [backend] 梳理智能体线程：显式 session 不再覆盖主线程；线程状态仅在主会话更新；队列任务按 session 生成 thread_id 以避免串扰
- [backend][config] 修复 SessionLease 未实现 Debug/Clone 导致 sandbox 编译失败，补齐本地 override API key 以支持 /wunder/ws 调试
- [backend][ws][frontend][chat] /wunder/ws 走 agent_runtime 队列并增加会话租约，降低并发下 USER_BUSY 与误中止；前端流式失败时自动清理问询面板待选状态
- [backend][ws][docs] 修复 WS cancel 误取消会话：watch/resume 中止不再触发会话级取消，request_id 仅停止当前流
- [web] 线程管理表格列顺序修复：活动线程数与上下文对齐
- [backend][storage] 放宽 session_locks 为会话级互斥，允许同一用户并行多个会话
- [web][debug] 调试面板空 session_id 自动生成唯一会话，避免历史记录被覆盖
- [frontend][chat] 修复聊天快照合并逻辑，刷新后多轮工作流信息丢失与输出顺序异常的问题
- [frontend][web][debug] 修复聊天 watch 重用流式消息避免重复输出卡住，并修复调试面板自动写入 session_id 导致历史覆盖
- [frontend] 修复定时任务触发消息乱序与工作流事件丢失，按用户轮次分流监控事件并插入用户气泡。
- [backend][frontend][ws] watch 订阅避免历史事件回放并补充定时任务用户气泡
- [frontend][backend][cron] 定时任务实时消息补充用户气泡与 watch 去重处理
- [backend][frontend][cron] 优化定时任务触发回复的实时展示（cron流式事件落库 + 会话监听自动续流）
- [backend][cron] 定时任务执行结束后基于最新记录更新状态，避免停用/删除后被回写复活
- [backend] 构建全目标时抑制dead_code告警
- [backend] 修复集成测试lib构建dead_code告警
### 文档
- [docs] 更新错误处理与提示增强审查文档的落地进展
- [docs] 更新会话状态机图，补充 waiting 状态
- [docs] 补充论文主链路概念与并发/等待/排队语义说明
- [docs] 更新系统介绍/系统概览/WS 传输文档的 waiting 状态与并发说明
- [docs] 更新系统介绍/设计/架构/英文概览文档的并发与队列说明，补充 session_id 互斥、自动分叉与问询面板 waiting 行为
- [docs] 补充 /wunder 忙时队列与问询面板 waiting 状态的处理说明（含自动分叉会话行为）
- [docs] 架构设计补充主链路原样表述
- [docs] 架构设计补充 user→agent→session→agent_loop→WS/SSE 关系图
- [docs] 新增错误处理与提示增强审查文档
- [docs] 架构设计补充主链路 user→agent→session→agent_loop→WS/SSE
- [docs] 更新架构设计补充用户-智能体-线程关系图
- [docs][readme] 精简 README，移除请求示例与 API 入口概览，补充用户侧功能与使用说明
- [docs][frontend] 补充主线程/时间线交互规则与前端落地路径
- [docs] 新增《强化智能体落地方案.md》并明确默认会话+异步队列落地路径
### 测试
- [tests][cron] 新增会话删除级联定时任务的存储测试
- [tests][cron] 补充定时任务结束逻辑测试，覆盖删除与停用场景
- [backend] 新增定时任务工具集成测试
## 2026-02-04
### 新增
- [backend][frontend][chat] 新增慢客户端告警事件并在前端提供续传提示
### 变更
- [frontend] 用户发送消息后自动居中当前智能体输出区域
- [frontend] 沙盒容器空状态提示改为天蓝色
- [frontend] 调整沙盒容器空状态提示字体与居中样式
- [frontend] 沙盒容器为空时提示临时文件区及24小时清理说明
- [frontend] 调整工作区文件夹图标并裁剪 VSCode 图标集
- [frontend] 沙盒列表图标切换为 VSCode file icons 主题并使用扩展名/文件名映射
- [frontend] 沙盒列表收紧间距并为代码类文件映射文本图标
- [frontend] 沙盒列表图标统一改用 doc-icons 图标集
- [frontend] 沙盒列表条目扁平化并为文件夹/文件图标加入拟物效果
- [frontend] 沙盒容器区改为单位管理树状容器风格（简洁虚线边框）
- [frontend] 资源文件卡片标题区与图标区分离并调整左对齐大图标样式
- [frontend] 资源文件图标改用本地 PNG 文档图标并兼容部署基路径
- [前端] 聊天标题传输状态灯支持点击切换
- [frontend] 资源文件链接统一渲染为带标题的文档图标卡片
- [前端] 聊天标题增加SSE/WS传输状态灯
- [frontend] AI 资源文件卡片改为图标化展示并支持点击下载
- [backend][frontend][docs] WebSocket 升级为多路复用协议并支持 Sec-WebSocket-Protocol 鉴权
- [frontend][portal] 世界页智能体卡片精简元信息为单一时间字段，并移除默认入口说明
- [frontend][portal] 世界页智能体卡片 meta 信息调整至编辑操作左侧
- [frontend][portal] 世界页智能体卡片状态仅保留单一标识并新增空闲待命提示
### 修复
- [frontend] 修复沙盒容器空提示中文乱码
- [frontend] 统一工作区图标样式并补齐 txt/log 文本图标映射
- [frontend] 修复工作区文件图标映射与列表紧凑度
- [frontend] 修复资源文件图标路径正则导致的前端语法错误
- [frontend][chat] WebSocket 连接失败时自动降级 SSE 一段时间，减少重复报错
- [frontend][chat] 修复多会话切换时后台流式更新丢失并在会话列表提示运行状态
- [附件解析] 调试面板附件解析接口提升上传上限至10MB，避免大体积PPTX/DPS解析失败

### 性能
- [backend][ws] 优化 WebSocket resume 轮询退避与慢客户端丢弃增量事件，降低空转与阻塞开销
- [frontend][chat] 用户侧聊天流式 WebSocket 连接复用与多路复用，减少握手与连接开销
### 文档
- [docs][cron] 新增定时任务落地方案文档
- [docs] 补充 WebSocket slow_client 告警事件说明
- [docs] 修复 API文档 与 WebSocket-Transport 中文乱码
- [docs] 补充架构与系统介绍中的 WebSocket 默认传输说明
## 2026-02-03
### 新增
- [backend][docs] 新增 /wunder/ws WebSocket 统一入口并补齐协议说明
- [backend][frontend][docs] 新增 WebSocket 流式传输并在用户侧默认启用
### 变更
- [backend][doc2md] doc2md 上传大小上限调整为 10MB
- [backend][doc2md] xlsx 解析改用 rlsx 并在失败时回退 calamine
- [frontend] 用户侧聊天页间距更紧凑
- [frontend][portal] 对齐聊天与世界页顶栏样式（渐变与间距统一）
- [frontend][portal] 恢复浅色主题世界页顶栏原有渐变样式
- [skills][pptx] PPTX生成技能新增代码模板库版式与多类型布局脚本
- [frontend][portal] 浅色主题下世界页顶栏改为更素的纯色背景
- [frontend][portal] 浅色主题优化世界页智能体卡片视觉样式
- [frontend][chat] 仅最新智能体消息的状态灯保留动效
- [frontend][chat] 聊天消息头状态灯完成态改为绿色
- [frontend][chat] 聊天消息头增加智能体状态灯并与世界页样式对齐
- [frontend][chat] 浅色主题下移除计划浮动标签阴影
- [frontend][chat] 降低计划面板浮动标签阴影强度
- [frontend][chat] 计划面板浮动标签改为矩形样式
- [frontend][chat] 优化计划面板浮动标签外观，柔化两侧切角
- [frontend][chat] 用户侧聊天计划面板改为单一浮层，输入框上方展示进度并可展开全部计划
- [frontend] 用户侧前端工作流默认收起，并在标题行显示最新一条记录
- [web] 吞吐量线程监视速度值移除 token/秒单位显示。
- [web] 吞吐量测试线程监视改为展示单预填充/单解码速度，并限制性能曲线区域高度。
- [web] 调整吞吐量测试线程监视高度分配，释放性能曲线溢出空间。
- [web][throughput] 精简吞吐量表单并将线程统计移至左侧底部
- [web][throughput] 压缩线程监视空间并移除筛选按钮，提升统计卡片可读性
- [web][throughput] 吞吐量线程监视区改为统计信息展示
- [frontend][chat] 修复浅色主题工作流列表背景过深问题
- [frontend][chat] 紧凑化工作流条目间距并将列表呈现为统一块
- [frontend][ui] 调整用户侧图标尺寸整体缩小一档
- [frontend][tools] 更换浅色主题 user-tools-sidebar 风格为明亮渐变与柔和高光
- [frontend][tools] 美化浅色主题 user-tools-sidebar 视觉层次与阴影
- [frontend][tools] 移除工具管理页 user-tools-content 额外外框
- [frontend][chat] 调整浅色主题聊天面板亮度与沙盒侧栏阴影，并统一聊天与世界页顶栏高度
- [frontend][chat] 调整浅色主题阴影强度，避免沙盒容器呈现凹陷感
- [frontend][chat] 默认启用高性能视觉主题并迁移旧低功耗设置
### 修复
- [frontend] 修复多会话并发时流式状态互相干扰与续传失败提示
- [backend][doc2md] OLE 读取补充流名模糊匹配以兼容 WPS 文档
- [backend][doc2md] PPTX 解析容错并在 XML 异常时回退文本提取
- [backend] 消除 websocket 解析的未使用字段与导入警告
- [backend][doc2md] xlsx 缺失 workbook.xml.rels 时启用回退解析
- [web] 修复线程管理统计表操作列被裁剪，放宽操作列宽度并压缩内边距。
- [web] 系统设置布局改为自适应行高并允许滚动，避免窄屏重叠与顶部截断。
- [web] 优化系统设置页面在窄屏时的布局，避免卡片重叠并允许滚动。
- [web] 限制吞吐量性能曲线图表容器高度，避免卡片底部溢出。
- [web] 限制吞吐量性能曲线卡片溢出，确保卡片底部闭合。
- [skills][pptx] 修复 PPTX生成 技能文档中文乱码
### 文档
- [docs] 校准 WebSocket 传输文档的消息字段与心跳说明
- [docs] 补充 WebSocket 可选传输方案文档与接口说明
- [docs][prompts] 翻译 codex-main 提示词为中文
- [prompts] 对比 openclaw 与 wunder 提示词并输出补充建议
- [docs][prompts] 恢复 openclaw 提示词中文译文完整版
- [docs][prompts] 精简 openclaw 提示词内参文档为中文要点
- [docs][prompts] 整理 openclaw 提示词参考文档
- [docs][prompts] 整理 codex-main 提示词参考文档
- [skills][pptx] 优化 PPTX生成 技能流程，强调需求要素收集、大纲确认与按纲交付

### 安全
- [backend][docs] WS 入口补充错误码并增加会话校验
### 移除
- [frontend][docs] 移除像素风主题与用户侧前端重构方案文档
## 2026-02-02
### 变更
- [frontend][ui] 优化用户侧 message box 关闭按钮尺寸与深色主题文字对比度
- [frontend][portal] 智能体编辑页提示词与基础设置对调位置，并将提示词标题简化
- [frontend][portal] 智能体编辑页头像设置默认展开
- [frontend][portal] 增强深色主题下智能体编辑弹窗各区域层级与分区对比度
- [frontend][portal] 提升智能体编辑弹窗深色主题表单与选项文字对比度
- [frontend][portal] 编辑智能体应用基础设置移除展开按钮，改为点击头像图标展开
- [frontend][portal] 提升世界页智能体编辑弹窗的头尾区与按钮质感，强化表单与工具分组层次
- [frontend][portal] 优化世界页智能体编辑弹窗的布局层级与表单样式
- [frontend][backend][auth] 注册与资料编辑支持选择单位，新增用户侧单位列表接口并完善暗色资料编辑弹窗样式
- [frontend][profile] 优化用户侧我的概况页面布局与视觉层级，补充额度明细展示

### 修复
- [frontend][ui] 增强浅色主题 el-dialog 关闭按钮悬停与按下交互
- [frontend][ui] 修复 el-dialog 关闭按钮样式与交互状态
- [frontend][workspace] 修复沙盒容器清空提示占位符未替换的问题
- [frontend][ui] 修复用户侧 message box 关闭按钮未对齐标题行的问题
- [frontend][portal] 修复智能体工具勾选的 Checkbox value 警告，并统一美化对话框头部样式
- [frontend][chat] 修复流式聊天请求未应用 API base 导致指向前端端口
## 2026-02-01
### 新增
- [backend][channels] 多渠道接入、绑定路由、会话映射、出站重试与多模态处理基础链路落地
### 变更
- [docker][frontend] wunder_nginx 挂载 frontend/public/config.json 以支持运行时配置
- [frontend][config] 前端支持运行时 config.json 配置 API 基址，并统一请求与 i18n 使用
- [config][docker] 统一 compose 默认值与 .env.example，并通过 WUNDER_LOG_LEVEL 统一日志级别
- [config] 整理示例配置，将可外置的变量迁移到 .env.example
- [frontend] 工具管理页去除多余外框，界面更清爽
- [frontend] 精简工具管理页容器结构，去掉多余包裹层并合并样式作用域。
- [frontend] 精简工具管理页容器类名，合并页面容器样式。
- [frontend] 工具管理页去除冗余区块标题，将状态提示放到各工具标题行右侧并提升区域区分度。
- [frontend] 将用户工具状态提示移动到工具管理页面区块标题栏右侧。
- [frontend] 优化用户工具面板：状态信息挪至分类标题行，统一标题/提示字号，并改善浅色主题下技能目录与编辑区背景。
- [frontend][backend][docs] 对齐用户侧技能管理，新增技能目录/文件编辑与删除能力，并补充用户技能文件接口与文档。
### 修复
- [docker][frontend] 调整 nginx config.json 挂载路径以避免只读目录挂载失败
- [frontend] 工具管理页恢复 user-tools 主题变量以修复 MCP/技能样式
- [frontend] 工具管理页恢复侧边栏布局并移除外层边框
- [backend][channels] 修正渠道处理代码的告警与字段冗余
- [backend][deps] 补充 reqwest multipart feature 以支持 ASR/TTS 多部件请求
- [子智能体] 子智能体控制忽略无效agentId并补充等待进度心跳

### 文档
- [docs] 补充多渠道与多模态接入相关设计与 API 文档说明
## 2026-01-31
### 新增
- [backend][docs] 新增子会话会话工具与运行记录，支持派生子智能体并回传结果，并补充设计/API/系统文档说明
### 变更
- [backend][docs] doc2md/attachments/convert 支持多文件上传并返回 items 列表
- [frontend] 统一用户侧顶部导航图标尺寸，并将聊天页工具管理按钮更名为工具调整并更新图标
- [管理端] 内部状态热力图子智能体控制使用机器人图标
- [子智能体控制] 子智能体控制 spawn 支持等待子会话完成并返回结果
- [frontend] 用户侧世界/工具管理图标调整并放大顶部导航按钮
- [backend][docs] 合并会话列表/历史/发送/派生为子智能体控制工具，调整配置与文档说明
- [frontend] 用户侧世界/工具管理按钮改为纯图标显示
- [frontend] 用户侧世界与工具管理按钮恢复文字并统一地球图标
- [frontend] 导航中的广场改名为世界
- [frontend] 用户侧前端将临时文件区改名为沙盒容器，功能广场改名为世界
- [frontend] 管理员开放工具区改为网格布局并限制滚动不超出侧栏
- [frontend] 调整功能广场搜索区与数量标签的排布顺序
- [backend] 替换智能体应用示例为科学绘图与政策分析
- [frontend] 暂时隐藏功能广场的共享智能体应用区域
- [frontend] 将功能广场搜索栏移至我的智能体应用标题行右侧

### 修复
- [frontend] 修复 en-US locale 文案中的单引号导致的构建语法错误
- [子智能体控制] 子智能体控制子会话使用独立锁域，避免与父会话并发冲突
- [frontend] 修复用户侧 i18n 中文文案写入乱码问题
- [frontend] 补齐用户侧 i18n 文案与系统工具字段，修复界面显示原始 key
- [frontend] 修复 i18n 接口地址正则包含未转义斜杠导致的构建语法错误
- [知识库][web][frontend] 完善向量知识库上传失败提示，展示后端错误详情
### 文档
- [docs] 新增多渠道与多模态集成落地方案
- [docs] 新增子agent落地方案文档
- [docs][web] 论文补充热门项目 OpenClaw 案例
- [docs] 修正用户手册：合并工作区与沙盒容器说明
- [docs] 重构用户侧使用手册，补充更细致操作并更新命名
- [docs] 新增用户侧使用手册
### 工程
- [backend] 清理 user_tools 未使用导入，消除编译告警
## 2026-01-30
### 变更
- [知识库][backend][web][frontend] 向量知识库上传自动切片嵌入并增加上传动画
- [web] 用户管理页面新增单位等级列
- [backend][docs] 管理员会话跳过配额、会话锁、历史/监控裁剪、超时与保留清理，记忆不设上限以支持长期运行
- [frontend] 合并用户侧工具管理页面的管理员开放工具与自建工具展示，新增只读查看分类
- [frontend][backend] 修复新增字面知识库路径越界校验并调整字面知识库操作按钮布局
- [frontend] 调整用户侧知识库按钮布局与批量嵌入动画表现
- [frontend][backend][docs] 对齐用户侧知识库页面交互与样式，新增切片批量嵌入/删除与测试接口
- [web][backend] 字面知识库测试返回模型原始输出并列出命中文档内容
- [web][backend] 字面知识库测试改为输出大模型原始回复
- [web][backend] 知识库测试弹窗固定尺寸，重建嵌入显示切片动画，并支持字面知识库测试
- [frontend] 对齐用户侧自建工具知识库按钮样式，补齐图标按钮布局
- [web] 用户管理列表所属单位列仅显示当前单位名称
- [知识库][backend] 向量知识库关键词列表检索去重重复切片以节省上下文
- [backend][storage][知识库] 向量知识库文档与切片元数据改为数据库存储并支持旧文件迁移
- [知识库][向量知识库][工具] 向量知识库工具新增 keywords 列表检索并批量嵌入查询
- [web][admin] 单位树支持一键展开/折叠并统一为文件树图标风格
- [知识库][向量知识库][性能] 向量知识库写入加文档锁与原子写入，Weaviate 查询变量化并优先批量删除，索引重建改为先写后删，上传增加大小与内容上限
### 修复
- [backend] 用户工具调用统计过滤内部工具与技能读取日志
- [web][docs] 部署拓扑图 SVG 增加版本参数以绕过浏览器缓存
- [web][docs] 修复部署拓扑图 SVG 解析错误导致的显示失败
- [web] 修复性能测试耗时表头与向量知识库流程列的匹配
- [知识库][backend] 修复 Weaviate GraphQL limit 变量类型解析导致的检索失败
- [知识库][backend] 修正 Weaviate GraphQL Text 变量类型以匹配过滤器
- [知识库][backend] 修复 Weaviate GraphQL 文本过滤变量类型导致的向量检索失败
- [backend] 修复向量知识文档锁闭包借用导致的编译错误
- [backend] 手动触发压缩在有历史但无候选时仍执行，避免强制压缩被跳过
- [backend][debug] 强制压缩前刷新历史写入队列，避免压缩被跳过
### 性能
- [web] 用户管理列表加载加入加载锁并简化单位列渲染，翻页更顺滑
- [web][admin] 用户管理翻页保留表格内容，降低加载抖动
- [backend][storage] 批量写入测试用户，减少批量生成耗时
### 文档
- [docs][web] 同步论文图示资源并重新生成《智能体调度平台的设计与实现》DOCX
- [docs][架构设计] 部署拓扑图调整 MCP 服务与向量数据库节点间距
- [docs][架构设计] 部署拓扑图调整 wunder_engine 与向量数据库节点宽度，确保文字完整显示
- [docs][知识库] 更新设计/API/系统介绍与方案说明以同步向量知识库改为数据库存储
- [docs][api][知识库] API 文档补充知识库工具 keywords 入参与 queries 返回说明
- [docs][web][部署拓扑] 更新部署拓扑图将向量数据库并入运行服务并同步论文描述
- [docs][架构设计] 调整架构设计为原理阐述并补充向量知识库流程图与配置治理说明

### 移除
- [backend][storage] 移除用户工具禁用黑名单字段与存储逻辑，仅保留可用工具白名单
## 2026-01-29
### 新增
- [web][backend][admin] 用户管理新增按单位批量生成测试用户
- [后端][前端][文档] 新增向量知识库支持（Weaviate + 嵌入模型），补充上传切片索引与可视化管理
- [backend][web][config][admin] 新增单位层级体系，启动根据单位结构配置初始化组织树并提供管理端单位管理页面与负责人管理能力
- [backend] 新增用户资料更新接口并预置办公智能体模板

### 变更
- [管理端][知识库] 知识库详情操作按钮改为图标并统一尺寸
- [web] 管理端知识库操作按钮移至详情头部，并将切片全选按钮调整到原文档操作区
- [web] 管理端知识库新增弹窗在字面类型时隐藏并禁用嵌入相关配置项
- [web][backend] 知识库文档上传支持多选，性能测试新增向量知识库流程耗时指标
- [web] 管理端向量知识库切片操作按钮改为图标样式并新增全选功能
- [web][backend][docs] 向量知识库管理改为原文弹窗与批量嵌入/删除，新增测试入口和嵌入动画提示并修复删除后残留目录，吞吐/评估模型仅展示LLM
- [config][backend] 将单位结构配置文件改名为org_units.json
- [backend][web][docs] 向量知识库上传改为仅切片待嵌入，新增切片编辑/嵌入/删除与原文折叠查看
- [web][backend][admin] 调试面板新增上下文压缩按钮并支持手动触发会话压缩
- [用户侧前端] 用户侧替换为 Font Awesome 图标体系，统一聊天/广场/工具与工作区等图标
- [前端] 管理员侧模型配置嵌入模型精简字段与默认限制，知识库列表加入类型图标并修正字面布局
- [web][admin] 单位管理树支持折叠/展开以便快速浏览层级
- [web][admin] 单位管理树形目录改为简洁列表样式，视觉对齐技能文件树
- [web][admin] 用户管理设置移除禁用工具配置，仅保留可用工具白名单
- [frontend] 智能体头像设置区域紧凑化并将预览与按钮聚合
- [backend][frontend][web] 访问级别改为单位体系统一全量权限，工具权限改用白名单/黑名单与单位默认配额
- [frontend] 智能体头像设置改为折叠面板并支持自定义颜色与更多图标
- [frontend] 智能体编辑弹窗整合头像与共享设置并压缩空间
- [backend] 预置智能体将邮件写作替换为公文写作并自动迁移旧条目
- [frontend] 统一智能体卡片头像尺寸为方形
- [frontend] 调整广场搜索栏位置与概况布局，新增资料编辑入口并优化会话工具应用按钮可见性
### 修复
- [backend] 调试面板手动压缩时保留最近用户消息避免历史压缩被跳过
- [backend] 修复 Weaviate GraphQL 查询语法导致向量知识库检索失败的问题
- [backend] 修复向量知识库 Weaviate 批量写入与查询错误未暴露导致召回为空的问题，并补充 schema 属性自动补全
- [frontend] 功能广场搜索框调整为标题行居中布局
- [frontend] 修正功能广场搜索框位置避免标题换行
- [frontend] 将功能广场搜索框调整到标题右侧
### 性能
- [backend][web] 用户管理批量测试用户生成与分页渲染性能优化
### 文档
- [docs][架构设计] 更新架构设计补充智能体广场、多智能体并行与向量知识库
- [docs] 更新设计/API/系统/数据库/用户前端文档以覆盖单位层级、权限策略与管理端页面
- [docs] 移除向量知识库方案中的待确认事项段落
- [docs] 更新向量知识库方案明确存储目录与模型约束
- [docs] 新增向量知识库实现方案文档
## 2026-01-28
### 新增
- [frontend][backend][docs] 新增共享智能体能力：支持共享标记与共享列表接口，同等级可见，并在功能广场新增共享智能体区域与共享开关
- [mcp_server] 新增知识库检索 MCP 工具 kb_query 并接入 RAGFlow 配置
### 变更
- [backend] 进一步缩短智能体工作区标识长度（3+5 哈希）
- [backend] 进一步缩短智能体工作区标识长度
- [backend] 缩短智能体工作区标识并在删除智能体时清理对应工作区
- [frontend] 智能体应用支持头像图标/颜色选择，通用聊天头像改为纯图标
- [frontend] 功能广场移除智能体空态提示，调整共享区域间距并为智能体卡片添加头像与质感样式
- [frontend] 功能广场搜索框移至标题栏中部并将智能体卡片编辑/删除改为图标按钮
- [frontend][backend][api] 智能体会话支持按智能体恢复上次会话，并在问询面板等待时保留提示与广场状态展示
- [frontend] 优化功能广场顶部栏搜索位置与智能体卡片操作交互，调整工具管理布局留足自建工具空间
- [frontend] 补充广场智能体卡片操作按钮悬停反馈并提升浅色主题删除按钮可读性
- [mcp_server] 精简 kb_query 描述，移除数据集ID显示
- [mcp_server] 配置 kb_query 连接到 RAGFlow 知识库并完成连通性验证
- [frontend] 修复智能体会话新建跳回通用聊天的问题，并按智能体隔离历史记录与草稿会话
- [frontend] 对齐用户侧今日额度与管理员口径，并加粗概况页额度环图
- [frontend] 概况页额度环改为 ECharts 环图以对齐管理员侧线程状态展示
- [frontend] 概况页额度环样式调整为更接近管理员侧线程状态环图
- [frontend] 调整功能广场搜索框从标题区移出并优化顶部栏布局
- [frontend] 调整聊天页顶部布局与按钮排序，收紧功能广场搜索位置，并优化概况页额度环样式与导航入口展示
- [frontend] 工具管理将共享工具并入自建工具分类并压缩左栏宽度，功能广场标题栏移除新建与聊天入口，聊天工具调整面板移除搜索/禁用开关并优化暗色按钮样式
- [frontend] 对齐用户侧标题栏样式与布局，聊天页补回广场入口并将工具调整改为图标按钮，智能体创建工具分组支持全选/取消，问候语采用智能体描述

### 修复
- [backend] 发送消息时自动结束同智能体的问询等待会话
- [backend] 修复监控线程强制清理时的编译错误
- [backend] 线程管理删除改为强制清理监控/会话数据，等待态线程可终止
- [backend] 通用聊天运行状态补充监控兜底，避免卡片不显示
- [frontend][backend][api] 通用聊天卡片联动运行中/待选择状态展示
- [frontend][backend][tools] 问询面板待选择状态默认保持开启并确保工具事件/历史记录携带面板信息
- [frontend] 修复智能体聊天保持 agent_id 避免新建会话跳回通用，并对齐今日额度展示与环图表现
- [docs] 修复架构设计图 Mermaid 语法以避免解析错误
### 文档
- [docs] 新增数据库设计字段级ER图
- [docs] 补充数据库设计图示
- [docs] 补充数据库设计逻辑关系图
- [docs] 新增 wunder 视频介绍 PPT 初稿
- [docs] 新增数据库设计文档
- [docs] 新增 wunder 视频介绍脚本
- [docs] 更新 API 文档、系统介绍与智能体拓展方案的 agent_id 工作区与运行中智能体说明
- [mcp_server] README 补充数据库描述建议以提升表选择准确性
- [web][docs] 论文部署拓扑改为引用图片并补充对应图文件
- [web][docs] 补充论文架构设计章节并追加部署拓扑图
- [docs] 重构部署拓扑布局，保持外部依赖置顶并与运行服务对齐
- [docs] 调整部署拓扑为上下分区布局以对齐挂载目录与运行服务
- [docs] 调整部署拓扑运行服务命名，并将 Workspaces 卷移到外部依赖下方
- [docs] 回退部署拓扑布局为上一版
- [docs] 简化部署拓扑节点命名并优化分组布局
- [docs] 调整部署拓扑运行服务与外部依赖配色，突出 Rust 区域
- [docs] 调整部署拓扑分组标题颜色以提升可读性
- [docs] 美化部署拓扑图样式，区分内部服务与外部依赖
- [docs] 新增架构设计文档，补充部署拓扑与组件说明
- [docs] 补充 UserProfile 额度字段说明，并更新智能体拓展方案的等级与工具描述
## 2026-01-27wunder_mcp
### 新增
- [mcp] 新增 mcp_server MCP 配置文件并支持 MCP_CONFIG_PATH
- [eva_skills][人员成长路径规划] 新增人员成长路径规划技能，补充分析流程与图表生成脚本
- [docker][mcp] 新增 wunder_mcp 服务与 mcp_server MCP 示例脚本
- [scripts] 新增人员数据库 FastMCP 示例脚本
- [eva_skills][电子表格处理] 生成电子表格技能评估样例（temp_dir/spreadsheet_skill_review.xlsx）
- [PPTX生成][eva_skills] 生成环保主题PPTX示例（含图表）用于技能评估
- [eva_skills][电子表格处理] 生成电子表格处理示例报表与图表（temp_dir/spreadsheet_analysis_demo.xlsx）
### 变更
- [frontend] 功能广场恢复通用聊天卡片并移除欢迎文案，工具管理页面去掉介绍标题并让自建工具区撑满高度
- [web][docs] 管理端移除附加提示词输入与接口文档说明
- [frontend][backend][config] 清理智能体广场页面入口与路由，移除用户额外提示词接口/存储，i18n 读取支持 BOM 防止乱码
- [mcp_server] 精简 mcp_config.json，移除 mcp 运行配置段
- [frontend][backend][docs] 功能广场聚焦智能体应用入口，工具管理重排并移除额外提示词
- [mcp_server] 数据库配置仅从 mcp_config.json 读取，移除 PERSONNEL_DB_* 环境变量
- [mcp][db] 数据库工具移除 db_key 入参
- [backend][frontend][docs] 智能体广场与工具管理落地，新增会话工具调整与ABC等级覆盖策略
- [mcp][db] 数据库用途说明支持 target_descriptions 补充
- [mcp][db] 数据库工具描述支持从配置文件读取用途说明
- [mcp] 精简 MCP 数据库工具并改为中文输入描述
- [mcp][db] 人员数据库 MCP 支持 MySQL/PostgreSQL 多库配置
- [PPTX生成][eva_skills] PPTX模板中文黑体英文Times New Roman并自动按字符切换字体
- [PPTX生成][eva_skills] PPTX模板标题条置顶并改为全幅内容区布局
- [eva_skills][电子表格处理] 优化电子表格处理技能文档，补充快速流程/图表模板/质量检查并完成测试
- [PPTX生成][eva_skills] PPTX生成脚本新增图表支持并瘦身标题栏布局
- [frontend] 调整个人概况信息卡布局并改进额度环形图展示
- [frontend] 优化今日额度环形图尺寸与样式，移除中心文字
- [frontend] 调整个人概况额度卡片拉伸与统计卡片网格布局
- [frontend] 概况页精简统计项，新增今日额度环状图并修复刷新后统计归零
- [orchestrator][tool_result] 工具结果截断改为保留前后各 2000 字符，便于定位常见报错
- [frontend] 我的概况补充额度与上下文占用统计，支持工具/Token汇总
- [frontend] 聊天页用户信息支持直达我的概况，概况页补充对话统计数据
- [frontend] 聊天页隐藏功能广场按钮，主题切换改为太阳/月亮按钮
- [frontend] 广场搜索移至标题栏，移除设置按钮与概况卡片，概况入口改为用户信息区
- [frontend] 广场入口改为单列展示，移除核心功能/设置与侧边栏入口，外链统一合并到主入口列表
- [frontend] 聊天wunder_mcp广场调整为 /home 并移除临时文件区入口

### 修复
- [mcp_server] 调整 MCP 数据库连接配置以通过鉴权
- [mcp_server] wunder_mcp 默认不再注入 PERSONNEL_DB_* 环境变量，优先使用配置文件数据库地址
- [mcp][db] 默认数据库 description 会自动用于多库描述提示
- [mcp][db] MCP PostgreSQL 非查询语句兼容缺失 lastrowid
- [frontend] 优化图片预览放大尺寸并防止历史问询面板复显
- [frontend] 修复图片预览弹窗宽度与历史问询面板重复弹出
- [frontend] 修复聊天图片资源卡片对 SVG 预览的兼容性
- [frontend][backend] 优化个人概况统计布局并修复上下文占用刷新后缺失
- [frontend] 资源图片缺失时提示已移除并同步下载错误提示
- [frontend] 修复 portal.css 多余括号导致的构建错误
- [docs][readme] 修复README中文乱码并重写中文版说明
- [docs][readme] 修复README增量编译说明中文乱码
### 性能
- [sandbox] 沙盒规则与路径派生结果加入 LRU 缓存，降低高并发重复归一化开销
- [sandbox][tools] 沙盒命令执行优先直通启动，减少 bash 解析开销以降低高并发延迟
### 文档
- [docs] 清理设计方案与工具调用文档中已移除的附加提示词描述
- [docs] 更新 MCP 数据库配置说明为仅使用 mcp_config.json
- [mcp] 更新 mcp_server README 连接示例名称
- [mcp] 更新 mcp_server README：补充 MCP 连接示例并精简说明
- [mcp] 补充 mcp_server README 部署与 IP/DB 配置说明
- [docs][智能体] 补充智能体功能拓展方案的ABC等级与管理员覆盖策略
- [docs][智能体] 新增智能体功能拓展方案文档
### 工程
- [sandbox][build] 移除 tools.rs 中未使用的 Command 引用以清理编译告警
## 2026-01-26
### 新增
- [frontend] 新增用户侧功能广场与个人概况页，默认入口切换为广场并支持模块化外链配置
### 变更
- [frontend] 优化功能广场布局为单页内滚动面板，外链入口改由 external-links 配置集中管理
- [sandbox][admin][docs] 移除沙盒镜像配置项并同步配置示例与接口文档
- [skills][公文写作] 公文写作默认字体名称修正为仿宋_GB2312与楷体_GB2312
- [优化wunder] PPTX 视觉评分口径补充：空文本形状计入 non_text_shapes
- [技能][PPTX生成] PPTX 生成模板新增多套内置版式（report/lecture/education/defense/simple）并补充背景卡片
- [优化wunder] PPTX 熟练度评分权重调整：强调视觉与样式，降低流程/产物/内容权重
- [web] 为工作区文件读写接口补充 Python 示例
- [优化wunder] PPTX 评分用例增加前置清理要求：请求前删除 user_id 工作区与历史
- [优化wunder] PPTX 熟练度评分增加门槛：无非文本形状时视觉与样式整块记 0 分
- [web] 将接口示例从 curl 替换为 Python requests
- [web][docs] 重构管理端接口文档页面，改为左侧接口列表+右侧详情，并将接口信息维护到 web/docs/api-docs.json
- [技能][优化wunder] 调整PPTX熟练度评分权重并强调视觉样式
- [frontend][chat] 用户侧聊天输入支持拖拽上传，并将问询面板选择改为随发送按钮一起提交
- [技能][优化wunder] 补充PPTX生成任务的熟练度评分机制
- [技能][PPTX生成] 补充PPTX生成技能编辑约束与失败处理说明
- [技能][PPTX生成] 拆分字体与颜色常量并加标记，降低样式修改出错率
- [技能][PPTX生成] 简化PPTX生成模板输出路径，避免路径模块导致脚本失败
- [技能][PPTX生成] 优化PPTX生成技能模板与流程，增加可替换标记与输出文件变量
- [frontend] 前端支持从仓库根目录 .env 读取 VITE_API_BASE 作为 API 基础地址
- [web][debug] 调试面板稳定性按钮移至操作行最左侧

### 修复
- [技能][PPTX生成] PPTX 模板兼容旧版 PptxGenJS：ShapeType 缺失时回退为字符串形状
- [web] 修复工作区文件读写示例标题乱码
- [web] 修复接口文档 Python 示例中的中文乱码
- [web] 修复接口列表点击后折叠状态被重置导致跳回核心对话的问题
- [frontend][chat] 修复问询面板在同会话内二次弹出不显示的问题
- [公文写作] 二级/三级标题改为加粗并取消三级标题斜体
- [公文写作] 修复公文写作 DOCX 标题颜色默认变蓝的问题
### 性能
- [storage][postgres] 优化Postgres存储连接池与日志索引并改进会话锁并发
### 文档
- [docs][readme] 补充 docker compose 启动时增量编译判断说明
- [docs] 智能体调度平台的设计与实现 DOCX 补齐图片并通过 pandoc 重新生成
- [web][docs] 调整 paper2.md 的本体论表述为轻量补充
- [web][docs] 优化 paper2.md 结构，弱化本体论并作为补充说明
- [web][docs] 重构 paper.md，强化本体论语义层叙事与结构
- [readme] README-English 补充前端 API 基地址使用根目录 .env 配置说明
## 2026-01-25
### 新增
- [工具] 增加技能调用内置工具用于按技能名返回SKILL.md与目录结构
- [frontend] 聊天消息内的工作区资源链接支持图片预览与下载。
- [skills][优化wunder] 新增调试技能优化wunder，沉淀wunder调试流程与注意事项
- [skills][公文写作] 新增一键嵌图 DOCX 转换脚本并补充使用说明
- [web][debug] 调试面板新增长对话稳定性预设与自动化执行
### 变更
- [工具][sandbox] 执行命令移除shell参数并默认使用shell执行
- [工具][sandbox] 执行命令默认启用shell并放开限制
- [提示词][工具] 执行命令工具说明补充workdir仅限工作区相对路径且content不限制
- [工具][技能] 技能调用返回SKILL.md路径与技能根目录的绝对路径
- [提示词][技能] 技能使用协议移除第五条并同步英文描述
- [提示词][技能] 已挂载技能列表恢复输出SKILL.md路径与Frontmatter
- [提示词][技能] 已挂载技能列表补充描述字段展示
- [docker] wunder_engine 启动前检查目标二进制是否过期，等待 sandbox 重新编译后再启动
- [web][monitor] 内部状态工具热力图中技能调用使用魔法棒图标
- [提示词][技能] 已挂载技能列表不再输出SKILL.md路径与Frontmatter
- [frontend] 窄屏时侧栏改为顶部按钮并弹窗展示临时文件区/历史记录
- [frontend] 窄屏时隐藏侧栏并在顶部提供临时文件区/历史记录按钮弹窗查看
- [提示词][工具] 技能提示词规则改为使用技能调用获取SKILL.md
- [frontend] 图片资源卡片标题与元信息合并同行展示，缩紧图片信息区
- [frontend] 优化图片资源卡片尺寸贴合预览，并支持点击放大查看
- [docker] wunder_engine 不再等待 sandbox 健康检查，改为 service_started 以适配首次编译耗时
- [docker] 将 sandbox 的 CARGO_HOME 调整为 /app/.cargo，统一使用项目内 .cargo
- [docker] 放开 sandbox 容器对 /app 的只读挂载，允许写入 target 产物
- [docker] 调整 x86/arm compose 的 CARGO_TARGET_DIR 为项目内 target/x86 与 target/arm 目录，便于打包移植
- [prompt] 系统提示词补充资源输出指引，要求提供可访问的工作区路径与预览/下载链接。
- [frontend] 缩小聊天资源图片预览尺寸以避免占用过多空间。
- [frontend] 优化用户侧聊天窄屏布局：临时文件区与历史记录顶部并排，聊天区下置。
- [skills][优化wunder] 将实战示例移动至 examples 并细化流程
- [skills] 补充技能创建器脚本参数约束与最短执行清单
- [skills][优化wunder] 补充优化wunder技能的上下文压缩实战示例
- [prompts][skills] 优化问询面板规则与技能脚本指引，补充python3与路径/依赖检查要求
- [skills][优化wunder] 强调调试时必须设置 debug_payload 为 true
- [skills][公文写作] 代码块段落增加边框与底色
- [skills][公文写作] 代码块英文字体改为 Times New Roman
- [prompts] 系统提示词补充上下文摘要使用规则，避免摘要结构被直接复述
- [backend][prompts] 优化上下文压缩摘要结构并将摘要按系统上下文注入
- [skills][公文写作] 补充引用上标规范并在转换后自动将正文[数字]转为上标
- [skills][公文写作] DOCX 转换改用 pypandoc 并统一表格字体小一号/表头居中
- [skills][公文写作] 合并嵌图流程到 convert_markdown_to_docx 并移除独立嵌图脚本
- [web][debug] 调试面板模型输出轮次展示补齐总轮次/用户轮次/模型轮次三段信息
- [skills][公文写作] 一键转换脚本自动将 SVG 渲染为高分辨率 PNG 并移除手动嵌图说明
- [web][useraccounts] 用户管理设置的用户权限改为下拉选择 user/admin
- [backend][api] 事件流与会话事件移除 round 兼容字段，仅保留 user_round/model_round。
- [轮次] 明确用户轮次与模型轮次定义并在事件流监控与会话事件中补充 user_round/model_round 字段
- [web][debug] 增强长对话稳定性测试为图表与打包自动化流程
- [web][debug] 增强长对话稳定性测试题目难度与步骤
- [web][debug] 调试面板将长对话稳定性测试折叠为按钮并隐藏流式/新会话/锁定工具集选项
### 修复
- [frontend] 修复历史会话重放工作流事件时耗时统计被当前时间拉长的问题
- [docker] 修复 ARM 版 compose 复用 x86 构建产物导致的启动失败，隔离 CARGO_TARGET_DIR
- [frontend] 补齐浅色主题下发送/上传按钮悬停反馈样式
- [frontend] 模型输出结束后自动刷新临时文件区并重试资源卡片加载
- [frontend] 修复历史会话加载时按 user_round 关联工作流事件，避免工作流信息丢失
- [frontend] 修复工作区资源中文文件名显示与下载乱码问题。
- [frontend] 修复浅色主题下资源卡片样式与非图片资源误渲染为图片的问题。
- [skills][公文写作] pypandoc 调用增加 --quiet 以避免非 UTF-8 输出导致失败
- [skills][公文写作] 参考文献自动分段并优化代码块样式
- [skills][公文写作] 修正引用上标处理以覆盖表格并跳过参考文献段落
- [skills][公文写作] 表格单元格内容改为垂直居中
- [skills][公文写作] 清理样式主题字体并同步字符样式，避免标题回退到 MS 字体
- [backend][orchestrator] 修复上下文压缩在附件场景下可能遗漏当前问题，并裁剪摘要以确保回填后占用可控
- [skills][公文写作] pandoc 输出后补齐正文/标题样式字体并统一表格边框
- [web][debug] 调试面板 Token 占用改用上下文占用并补充计费 Token 消耗展示
- [web][debug] 调试面板统计信息 Token 文案改为占用用于上下文占用提示
- [skills][公文写作] 一键嵌图脚本优先复用已有 PNG 并修正 SVG 处理逻辑
- [web][debug] 调整调试面板模型输出按模型轮次渲染并展示用户轮次，避免不同用户轮次混淆
- [docs][web] 调整 docx 图片段落行距避免遮挡
- [web][backend] 修复管理端监控线程详情解码速度统计，按轮次累计排除工具耗时，并修复管理端中文文案乱码
- [docs][web] 修复 docx 表格样式与图片排版问题
- [frontend] 美化浅色主题系统提示词预览关闭按钮悬停交互样式
- [frontend] 浅色主题系统提示词预览关闭按钮补充悬停交互
- [frontend] 浅色主题下系统提示词预览关闭按钮改为浅色样式
- [skills][公文写作] 公文写作脚本识别已有标题编号避免重复编号
- [frontend][workspace] 用户侧临时文件区 SVG 预览改用 content 接口构建
- [frontend][workspace] 用户侧临时文件区 SVG 预览改用 iframe 并补白底
- [web][workspace] LSP 工作区双击非文本文件时改为预览而非编辑
- [web][frontend][workspace] 改用 Blob MIME 修正方式提升 SVG 预览兼容性
- [frontend][workspace] 用户侧临时文件区 SVG 预览补齐 MIME 处理
- [web][workspace] 修复临时文件区 SVG 预览未正确显示的问题
- [web][frontend] 修复管理端线程详情耗时与统计信息展示，并校准用户端会话耗时为完整交互时长
- [backend][orchestrator] 补齐工具执行结果截断与输出统计辅助，修正 llm_output_delta 回放过滤测试

### 性能
- [mcp][backend] MCP 工具清单拉取增加短 TTL 缓存，降低重复刷新开销
### 文档
- [prompts] 同步 system.txt 中英文提示词
- [docs] 重写系统介绍为管理层完整版，保留流程图并补充治理与工具细节
- [docs] 重写系统介绍为管理层版本，突出原理流程与价值
- [技能] 强化优化wunder对乱码样本的规避说明
- [技能][提示词] 补充优化wunder技能调试流程与实战示例
- [技能] 调整技能脚本执行示例，去除工作目录外的绝对路径
- [技能] 修正技能脚本执行说明，强调在工作目录执行
- [readme] 修复 README.md 中文乱码并统一为 UTF-8
- [readme][docs] 更新 README 与请求示例，补充 A2A/调试入口/存储与 Skills 说明并修正文档过时路径
- [skills][公文写作] 将图片段落修正流程设为必做并提供修复脚本
- [skills][公文写作] 补充 Linux 下 pandoc resource path 分隔与示例
- [skills][公文写作] 补充 pandoc 嵌图流程与图片段落排版说明
- [docs][web] 使用 pandoc 嵌入论文图示生成 docx
- [docs][web] 修复工具管理流程图中文乱码，新增 Agent Loop 图并同步论文 docx
- [docs][系统优化] 补充节点任务拆解与发布门槛三件套
- [docs][系统优化] 深化系统优化方案的可行性评估与节点细化
- [docs][系统优化] 补充系统优化方案的深入分析与持续推进节点
- [docs][web] 补充论文多轮对话 Agent Loop 与长期稳定运行方法说明
- [docs] 修复系统优化方案与设计/API文档中审批与缓存描述的乱码与字段说明
- [docs] 更新系统优化方案节点状态并补充审批缓存/MCP 缓存说明
- [docs] 同步 exec_policy_mode 与 context_usage/tool_result 事件说明
### 安全
- [backend][exec_policy] exec_policy 高风险命令支持审批标记与会话级缓存
### 工程
- [sandbox] 移除执行命令中未使用的shell解析辅助函数
- [backend] 移除提示词构建中的未使用路径辅助函数以消除编译警告
### 移除
- [skills][公文写作] 移除独立的 docx 图片修复脚本
## 2026-01-24
### 变更
- [管理端][性能测试] 性能测试增加权限/工具解析耗时指标
- [admin] 技能管理选择技能时默认打开 SKILL.md
- [admin] 内部状态热力图问询面板使用提问图标
- [skills][eva_skills] EVA_SKILLS 技能目录与名称统一为中文（公文写作、MCP服务构建、PDF处理、PPTX生成、SVG生成、技能创建器、电子表格处理）
### 修复
- [skills][公文写作] Markdown 转 DOCX 标题字体未按配置生效的问题
### 性能
- [sandbox][command_exec] 沙盒命令执行支持异步子进程，减少高并发排队
- [sandbox] 为沙盒命令执行增加线程池与 worker 可配置项
- [backend] 缓存工具路径根目录，减少高并发文件操作的路径归一化开销
### 文档
- [docs][系统优化] 新增系统优化方案文档
- [docs] 同步论文与架构图副本
- [docs] 更新架构图 SVG 与用户前端文档中的模块路径说明
- [docs] 更新设计/系统/API 文档与性能优化说明，补充 sandbox 模式与 prompts 路径。
- [docs] 补充沙盒命令执行并发优化说明
- [docs] 补充工具路径根目录缓存优化说明与指导
- [docs] 在AGENTS.md补充功能迭代类型清单
- [docs] 迁移旧记录至功能迭代-old.md并将记录规范移至AGENTS.md
- [docs][scripts] 建立分类化变更记录规范并升级写入脚本。
### 重构
- [backend][src] 整理 src 目录结构为 core/services/ops/sandbox，并移除未使用的旧后端代理代码。
- [sandbox][backend] 沙盒服务改为 Rust sandbox 模式运行，移除 app 并将提示词迁移至 prompts/。
### 工程
- [docker][sandbox] docker compose 改为由 sandbox 先编译共享产物，主服务直接启动 wunder-server。
- [infra] 补充沙盒并发调优环境变量示例
<!-- changelog:end -->

