<svg width="1200" height="720" viewBox="0 0 1200 720" fill="none" xmlns="http://www.w3.org/2000/svg">
<defs>
  <linearGradient id="bg-swarm" x1="0" y1="0" x2="1200" y2="720" gradientUnits="userSpaceOnUse">
    <stop offset="0" stop-color="#F8FAFF"/>
    <stop offset="1" stop-color="#EDF4FF"/>
  </linearGradient>
  <filter id="shadow-swarm" x="-20%" y="-20%" width="140%" height="140%">
    <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#0F1C33" flood-opacity="0.12"/>
  </filter>
  <marker id="arrow-swarm" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto">
    <path d="M0,0 L0,6 L8,3 z" fill="#4A7BF5"/>
  </marker>
  <style>
    .ttl { font: 700 34px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #1C2840; }
    .sub { font: 500 19px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #556681; }
    .h3 { font: 700 22px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #1F2A44; }
    .cap { font: 600 16px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #2A3F66; }
    .body { font: 500 16px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #5C6F8F; }
  </style>
</defs>

<rect x="18" y="18" width="1164" height="684" rx="28" fill="url(#bg-swarm)" stroke="#DCE6F5"/>
<text x="600" y="86" text-anchor="middle" class="ttl">蜂群协作 TeamRun 流程</text>
<text x="600" y="124" text-anchor="middle" class="sub">复杂任务拆分并行执行并最终归并输出</text>

<!-- 先画连接线，确保线条位于节点下层 -->
<g opacity="0.85">
  <line x1="450" y1="360" x2="450" y2="170" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>
  <line x1="450" y1="360" x2="615" y2="250" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>
  <line x1="450" y1="360" x2="615" y2="470" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>
  <line x1="450" y1="360" x2="450" y2="550" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>
  <line x1="450" y1="360" x2="285" y2="470" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>
  <line x1="450" y1="360" x2="285" y2="250" stroke="#7A9BFA" stroke-width="2" stroke-dasharray="6 6"/>

  <path d="M450 170 Q545 188 615 250" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
  <path d="M615 250 Q670 360 615 470" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
  <path d="M615 470 Q545 535 450 550" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
  <path d="M450 550 Q355 535 285 470" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
  <path d="M285 470 Q230 360 285 250" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
  <path d="M285 250 Q355 188 450 170" stroke="#4A7BF5" stroke-width="2.6" fill="none" marker-end="url(#arrow-swarm)"/>
</g>

<g filter="url(#shadow-swarm)">
  <circle cx="450" cy="360" r="86" fill="#FFFFFF" stroke="#D7E3F4"/>
</g>
<circle cx="450" cy="360" r="66" fill="#4A7BF5" fill-opacity="0.14"/>
<text x="450" y="356" text-anchor="middle" class="h3">TeamRun</text>
<text x="450" y="384" text-anchor="middle" class="body">母任务协调中枢</text>

<g filter="url(#shadow-swarm)"><circle cx="450" cy="170" r="46" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="450" y="176" text-anchor="middle" class="cap">任务拆分</text>

<g filter="url(#shadow-swarm)"><circle cx="615" cy="250" r="48" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="615" y="246" text-anchor="middle" class="cap">TeamTask</text>
<text x="615" y="268" text-anchor="middle" class="cap">派发</text>

<g filter="url(#shadow-swarm)"><circle cx="615" cy="470" r="54" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="615" y="466" text-anchor="middle" class="cap">子智能体</text>
<text x="615" y="488" text-anchor="middle" class="cap">执行</text>

<g filter="url(#shadow-swarm)"><circle cx="450" cy="550" r="46" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="450" y="556" text-anchor="middle" class="cap">结果归并</text>

<g filter="url(#shadow-swarm)"><circle cx="285" cy="470" r="48" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="285" y="476" text-anchor="middle" class="cap">事件回传</text>

<g filter="url(#shadow-swarm)"><circle cx="285" cy="250" r="46" fill="#FFFFFF" stroke="#D8E4F5"/></g>
<text x="285" y="256" text-anchor="middle" class="cap">最终回复</text>

<g filter="url(#shadow-swarm)">
  <rect x="760" y="180" width="350" height="380" rx="20" fill="#FFFFFF" stroke="#D7E3F4"/>
</g>
<text x="935" y="218" text-anchor="middle" class="h3">协作收益</text>

<rect x="790" y="244" width="290" height="82" rx="12" fill="#F7FAFF" stroke="#DCE7F5"/>
<text x="812" y="280" class="body">• team_* 事件实时可见，进度透明</text>
<text x="812" y="304" class="body">• 支持任务拆分与并行收敛</text>

<rect x="790" y="340" width="290" height="82" rx="12" fill="#F7FAFF" stroke="#DCE7F5"/>
<text x="812" y="376" class="body">• 保留 hive_id 作用域能力</text>
<text x="812" y="400" class="body">• 当前版本默认单蜂巢 default</text>

<rect x="790" y="436" width="290" height="92" rx="12" fill="#F7FAFF" stroke="#DCE7F5"/>
<text x="812" y="472" class="body">• 适合复杂任务的并行协作场景</text>
<text x="812" y="496" class="body">• 支持回放、复盘与策略优化</text>
</svg>
