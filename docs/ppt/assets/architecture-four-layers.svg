<svg width="1200" height="720" viewBox="0 0 1200 720" fill="none" xmlns="http://www.w3.org/2000/svg">
<defs>
  <linearGradient id="bg-arch" x1="0" y1="0" x2="1200" y2="720" gradientUnits="userSpaceOnUse">
    <stop offset="0" stop-color="#F6FAFF"/>
    <stop offset="1" stop-color="#EEF5FF"/>
  </linearGradient>
  <filter id="shadow-arch" x="-20%" y="-20%" width="140%" height="140%">
    <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#0F1C33" flood-opacity="0.12"/>
  </filter>
  <style>
    .ttl { font: 700 34px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #1C2840; }
    .sub { font: 500 19px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #556681; }
    .h3 { font: 700 22px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #1F2A44; }
    .body { font: 500 15px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #5C6F8F; }
    .cap { font: 600 16px 'Microsoft YaHei','PingFang SC','Noto Sans SC',sans-serif; fill: #2A3F66; }
  </style>
</defs>

<rect x="18" y="18" width="1164" height="684" rx="28" fill="url(#bg-arch)" stroke="#DCE6F5"/>

<text x="600" y="86" text-anchor="middle" class="ttl">重构后四层架构</text>
<text x="600" y="124" text-anchor="middle" class="sub">入口层 → 调度层 → 能力层 → 治理层</text>

<g filter="url(#shadow-arch)">
  <rect x="120" y="182" width="720" height="88" rx="16" fill="#E8F1FF" stroke="#D4E0F3"/>
</g>
<rect x="138" y="200" width="30" height="30" rx="8" fill="#4B7CF4" fill-opacity="0.22"/>
<text x="153" y="221" text-anchor="middle" class="cap">1</text>
<text x="188" y="220" text-anchor="start" class="h3">入口层</text>
<text x="188" y="248" text-anchor="start" class="body">frontend / web / cli / desktop / channel / gateway</text>

<g filter="url(#shadow-arch)">
  <rect x="120" y="290" width="720" height="88" rx="16" fill="#EEF6FF" stroke="#D4E0F3"/>
</g>
<rect x="138" y="308" width="30" height="30" rx="8" fill="#4B7CF4" fill-opacity="0.22"/>
<text x="153" y="329" text-anchor="middle" class="cap">2</text>
<text x="188" y="328" text-anchor="start" class="h3">调度层</text>
<text x="188" y="356" text-anchor="start" class="body">AgentRuntime + Orchestrator 统一执行链路</text>

<g filter="url(#shadow-arch)">
  <rect x="120" y="398" width="720" height="88" rx="16" fill="#F4FAFF" stroke="#D4E0F3"/>
</g>
<rect x="138" y="416" width="30" height="30" rx="8" fill="#4B7CF4" fill-opacity="0.22"/>
<text x="153" y="437" text-anchor="middle" class="cap">3</text>
<text x="188" y="436" text-anchor="start" class="h3">能力层</text>
<text x="188" y="464" text-anchor="start" class="body">工具系统、知识库、工作区、记忆、蜂群协作</text>

<g filter="url(#shadow-arch)">
  <rect x="120" y="506" width="720" height="88" rx="16" fill="#F9FCFF" stroke="#D4E0F3"/>
</g>
<rect x="138" y="524" width="30" height="30" rx="8" fill="#4B7CF4" fill-opacity="0.22"/>
<text x="153" y="545" text-anchor="middle" class="cap">4</text>
<text x="188" y="544" text-anchor="start" class="h3">治理层</text>
<text x="188" y="572" text-anchor="start" class="body">权限、安全、配额、监控、评测、审计</text>

<g filter="url(#shadow-arch)">
  <rect x="874" y="182" width="230" height="120" rx="16" fill="#FFFFFF" stroke="#D5E2F3"/>
</g>
<circle cx="900" cy="206" r="5" fill="#4B7CF4"/>
<text x="912" y="211" text-anchor="start" class="cap">说明</text>
<text x="894" y="244" text-anchor="start" class="body">入口扩展不破坏主链路</text>

<g filter="url(#shadow-arch)">
  <rect x="874" y="334" width="230" height="120" rx="16" fill="#FFFFFF" stroke="#D5E2F3"/>
</g>
<circle cx="900" cy="358" r="5" fill="#4B7CF4"/>
<text x="912" y="363" text-anchor="start" class="cap">说明</text>
<text x="894" y="396" text-anchor="start" class="body">能力扩展以工具协议接入</text>

<g filter="url(#shadow-arch)">
  <rect x="874" y="486" width="230" height="120" rx="16" fill="#FFFFFF" stroke="#D5E2F3"/>
</g>
<circle cx="900" cy="510" r="5" fill="#4B7CF4"/>
<text x="912" y="515" text-anchor="start" class="cap">说明</text>
<text x="894" y="548" text-anchor="start" class="body">治理能力与业务链路同源</text>
</svg>
