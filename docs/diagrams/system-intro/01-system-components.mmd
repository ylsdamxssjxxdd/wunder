flowchart LR
  Client[客户端/调试页] -->|/wunder| API[FastAPI API层]
  API --> Orchestrator[Orchestrator 调度引擎]
  Orchestrator --> Prompt[Prompt Builder]
  Orchestrator --> LLM[LLM 适配层]
  Orchestrator --> Tools[工具执行层]
  Tools --> Builtin[内置工具]
  Tools --> MCP[MCP 工具]
  Tools --> Skills[Skills 技能]
  Tools --> KB[知识库工具]
  Tools --> UserTools[自建/共享工具]
  Builtin -->|命令/ptc| Sandbox[共享沙盒服务]
  Orchestrator --> Monitor[线程监控]
  Orchestrator --> Storage[SQLite/工作区]
  Storage --> Workspaces[多用户工作区]
