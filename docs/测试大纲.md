# wunder 上线人工测试大纲（管理员侧前端 / 用户侧网页端 / 用户侧桌面端）

## 1. 文档信息

| 项目 | 内容 |
| --- | --- |
| 文档版本 | v1.0 |
| 编写日期 | 2026-03-01 |
| 适用阶段 | 上线前人工功能验证 / 回归验证 |
| 覆盖端 | 管理员侧前端（frontend 管理页 + web 管理控制台）、用户侧网页端（frontend）、用户侧桌面端（wunder-desktop + wunder-desktop-electron + frontend 桌面模式） |
| 测试定位 | 以人工可执行为主，强调功能完整性、稳定性、权限边界、异常恢复、上线放行标准 |

## 2. 编写依据（关键代码覆盖）

| 端别 | 关键代码位置 | 覆盖重点 |
| --- | --- | --- |
| 用户网页端 | `frontend/src/views/MessengerView.vue` | 消息主界面六大功能区、会话流转、设置与桌面模式入口 |
| 用户网页端 | `frontend/src/stores/chat.ts` | 消息流式收发、WS/SSE切换、停止与续传、审批流、token占用统计 |
| 用户网页端 | `frontend/src/stores/userWorld.ts` | 联系人/群组/会话、实时事件监听、未读与已读回执、权限拒绝兜底 |
| 用户网页端 | `frontend/src/components/chat/WorkspacePanel.vue` | 文件树、上传下载、搜索、预览、编辑、批量操作、拖拽 |
| 用户网页端 | `frontend/src/components/user-tools/*` | MCP/技能/知识库/共享工具管理 |
| 管理员侧（Vue） | `frontend/src/views/AdminLoginView.vue`、`AdminUsersView.vue`、`AdminAgentsView.vue`、`AdminSystemView.vue` | 登录鉴权、用户管理、Agent配置、系统状态 |
| 管理员侧（Web） | `web/index.html`、`web/app.js`、`web/modules/*.js` | 监控、调试、组织、账号、渠道、LLM、MCP、技能、知识、性能、评测等完整管理面板 |
| 桌面端 | `wunder-desktop-electron/src/main.js`、`preload.js` | Bridge拉起、窗口控制、更新、目录选择、单实例 |
| 桌面端 | `wunder-desktop/bridge.rs`、`runtime.rs`、`main.rs` | 本地token防护、桌面运行时注入、本地/远程模式切换、容器根目录与持久化 |

## 3. 测试目标与范围

### 3.1 测试目标

- 在上线前通过人工测试确认三端核心功能可用、链路可闭环、关键异常可恢复。
- 覆盖高风险路径：认证鉴权、流式会话、工具审批、文件操作、渠道与定时任务、桌面本地/远程双模式。
- 给出明确放行标准，保证“可上线、可回归、可复测”。

### 3.2 在范围内

- 管理员侧前端：Vue管理页与 `web/` 管理控制台。
- 用户侧网页端：登录注册、聊天、用户世界、工作区、工具、渠道、定时任务、设置与主题。
- 用户侧桌面端：桌面壳能力 + 前端桌面模式业务全链路。
- 跨端能力：权限边界、WS优先/SSE兜底、异常提示、性能基线、兼容性。

### 3.3 不在范围内（本次）

- 大规模自动化压测与极限容量测试（可在后续专项进行）。
- 后端内部实现细节单元测试（本次聚焦人工功能验证）。
- 历史版本兼容（当前阶段允许原型演进，按现版本验证）。

## 4. 测试环境矩阵

| 维度 | 基线环境 | 扩展环境 | 通过标准 |
| --- | --- | --- | --- |
| 服务端部署 | 单机发布版（接近生产配置） | Docker部署、远程网关模式 | 三端均可完成核心流程，接口无阻塞性错误 |
| 浏览器 | Chrome 最新稳定版 | Edge 最新稳定版、Firefox ESR | 页面可用、关键交互一致、无致命样式错乱 |
| 用户网页网络 | 正常网络（低时延） | 高时延、短时断网、代理阻断WS | 可自动降级或提示清晰，可恢复 |
| 管理端网络 | 正常网络 | 间歇性超时 | 查询与保存失败有明确提示，重试后恢复 |
| 桌面操作系统 | Windows 10/11 x64 | Linux（AppImage）、macOS（若发布） | 启动、更新、窗口控制、目录映射均正常 |
| 桌面运行模式 | 本地模式 | 端云协同（远程认证） | 模式切换后鉴权与业务行为符合预期 |
| 数据规模 | 小规模（10用户、10会话） | 中规模（1000联系人、大文件夹） | 不出现卡死、错误、数据错乱 |

## 5. 账号与测试数据准备

| 类别 | 准备项 | 用途 |
| --- | --- | --- |
| 管理员账号 | super_admin 1个、admin 1个、leader 1个 | 覆盖权限分层与功能可见性 |
| 用户账号 | 正常用户3个、禁用用户1个、新注册用户1个 | 覆盖登录、通讯、状态变化、禁用校验 |
| 非注册用户ID | 虚构 user_id 2个 | 验证 `/wunder` 调用无需先注册用户 |
| 智能体与工具 | 默认Agent + 自建Agent2个；内置/MCP/技能/知识工具若干 | 覆盖工具编排、审批、配置流 |
| 渠道数据 | 至少1个可用渠道账号（如飞书）+ 1个无效配置 | 覆盖成功/失败分支 |
| 工作区数据 | 多级目录、中文名、特殊字符名、超长名、图片/PDF/文本/二进制 | 覆盖工作区全操作与预览编辑 |
| 桌面数据 | 容器0~10映射路径、合法/非法远程地址、可更新/不可更新场景 | 覆盖桌面模式与容器管理 |

## 6. 执行策略与放行标准

### 6.1 执行批次建议

| 批次 | 目标 | 覆盖范围 | 耗时建议 |
| --- | --- | --- | --- |
| Smoke（P0） | 快速判定可测与可演示 | 登录、聊天、审批、文件、管理保存、桌面启动/切换 | 0.5~1天 |
| Full（P0+P1） | 上线前完整验证 | 本大纲全部高优先级与主要业务路径 | 2~4天 |
| Regression（缺陷回归） | 验证修复无回归 | 缺陷关联用例 + 相邻功能 | 按缺陷批次 |

### 6.2 缺陷分级

| 等级 | 定义 | 处置建议 |
| --- | --- | --- |
| S1 阻断 | 核心流程不可用、数据丢失、崩溃、严重安全风险 | 必须修复后才能上线 |
| S2 严重 | 关键功能异常但有临时绕过 | 原则上修复后上线 |
| S3 一般 | 非关键异常、局部体验问题 | 可带条件上线并排期修复 |
| S4 轻微 | 文案/样式细节问题 | 汇总优化 |

### 6.3 准入与准出

| 类型 | 标准 |
| --- | --- |
| 准入条件 | 发布包可安装；测试环境可访问；账号和基础数据已准备；日志可观测 |
| 准出条件 | P0 用例 100% 通过；P1 用例通过率 >= 95%；无S1/S2遗留；主要异常分支已验证；缺陷单与复测记录齐全 |

## 7. 主测试矩阵（大表）

> 说明：  
> - 优先级：P0（必须通过）/P1（上线前建议通过）/P2（增强覆盖）。  
> - 方式：手工、手工+接口辅助、手工+日志核验。  
> - 证据：最少包含“截图 + 关键日志/请求”。

### 7.1 管理员侧前端（Vue 管理页）

| 用例ID | 端别 | 测试域 | 测试项目 | 前置条件/数据 | 操作步骤（人工） | 预期结果 / 通过标准 | 优先级 | 方式 | 证据 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ADV-001 | 管理员Vue | 登录鉴权 | 管理员账号登录成功 | admin账号可用 | 打开`/admin/login`输入正确账号密码登录 | 跳转`/admin/users`，页面加载成功，无401 | P0 | 手工 | 登录页与跳转截图 |
| ADV-002 | 管理员Vue | 登录鉴权 | 非管理员账号拦截 | 普通用户账号 | 用普通用户登录管理员页面 | 提示无权限并退出登录态 | P0 | 手工 | 错误提示截图 |
| ADV-003 | 管理员Vue | 路由守卫 | 未登录访问管理路由 | 清理token | 直接访问`/admin/users` | 自动跳回`/admin/login` | P0 | 手工 | 跳转截图 |
| ADV-004 | 管理员Vue | 用户管理 | 用户搜索查询 | 至少10个用户 | 输入关键字点击查询 | 列表按关键字过滤，结果正确 | P1 | 手工 | 查询前后截图 |
| ADV-005 | 管理员Vue | 用户管理 | 新建用户 | 填写新用户数据 | 点击创建，填写用户名/邮箱/密码/等级提交 | 创建成功提示，列表可见新用户 | P0 | 手工 | 创建截图 |
| ADV-006 | 管理员Vue | 用户管理 | 修改用户状态 | 目标用户存在 | 将状态改为disabled后尝试该用户登录；再改回active | disabled不可登录；active恢复可登录 | P0 | 手工+接口辅助 | 状态切换与登录结果 |
| ADV-007 | 管理员Vue | 用户管理 | 修改访问等级 | A/B/C等级用户 | 修改access_level并刷新 | 变更持久化，刷新后值一致 | P1 | 手工 | 修改前后截图 |
| ADV-008 | 管理员Vue | 用户管理 | 在线状态刷新机制 | 有在线和离线用户 | 保持页面停留>=24秒，观察在线列变化 | 在线状态可自动刷新（约12秒一轮） | P1 | 手工 | 时间序列截图 |
| ADV-009 | 管理员Vue | 用户管理 | 重置密码流程 | 目标用户存在 | 输入新密码，确认弹窗后提交；再用新密码登录 | 重置成功；旧密码失效，新密码生效 | P0 | 手工 | 重置与登录截图 |
| ADV-010 | 管理员Vue | 用户工具权限 | 用户级工具白名单配置 | 至少1个用户和1个Agent | 打开工具配置：默认策略/自定义白名单切换并保存 | 保存成功；重开对话框配置保持 | P0 | 手工 | 配置截图 |
| ADV-011 | 管理员Vue | Agent配置 | 读取Wunder设置与连通状态 | `/admin/wunder/settings`可用 | 打开Agent管理页观察状态区块 | reachable、check时间、工具数展示正确 | P1 | 手工 | 状态区截图 |
| ADV-012 | 管理员Vue | Agent配置 | 保存Wunder设置 | 可编辑base_url/api_key/timeout | 修改参数点击保存并刷新页面 | 保存成功并持久化，异常参数有错误提示 | P0 | 手工 | 保存前后截图 |
| ADV-013 | 管理员Vue | 工具目录 | 工具分类分页展示 | 内置/MCP/skills/knowledge工具存在 | 切换各tab并刷新 | 各分类工具数与列表一致，无空白崩溃 | P1 | 手工 | tab截图 |
| ADV-014 | 管理员Vue | 系统状态 | 系统概览加载 | 管理员已登录 | 打开`/admin/system` | 服务时间、用户数、活跃会话正常显示 | P1 | 手工 | 系统页截图 |

### 7.2 管理员侧前端（web 管理控制台）

| 用例ID | 端别 | 测试域 | 测试项目 | 前置条件/数据 | 操作步骤（人工） | 预期结果 / 通过标准 | 优先级 | 方式 | 证据 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ADW-001 | 管理员Web | 登录鉴权 | 首次登录与token持久化 | 管理员账号可用 | 打开`web/index.html`，完成登录后刷新 | 刷新后保持登录，不重复弹框 | P0 | 手工 | 登录与刷新截图 |
| ADW-002 | 管理员Web | 登录鉴权 | token失效重登 | 手动注入无效token | 刷新页面 | 自动校验失败并要求重新登录 | P0 | 手工 | 弹窗截图 |
| ADW-003 | 管理员Web | 权限边界 | leader权限访问限制 | leader账号 | 登录后遍历关键模块 | 仅允许授权范围，越权接口被拒绝并有提示 | P0 | 手工+接口辅助 | 接口状态码截图 |
| ADW-004 | 管理员Web | 导航框架 | 侧栏折叠与分组展开 | 页面宽度可调整 | 宽度<1200观察折叠；切换分组展开/收起 | 布局稳定，无错位；导航高亮正确 | P1 | 手工 | 折叠前后截图 |
| ADW-005 | 管理员Web | Monitor | 监控列表与轮询 | 有会话数据 | 打开监控页查看筛选、轮询刷新 | 数据可刷新，筛选结果正确 | P0 | 手工 | 监控页截图 |
| ADW-006 | 管理员Web | Monitor | 会话详情与工具轨迹 | 选中会话 | 打开详情，核对消息与工具调用链 | 详情完整，无字段缺失/报错 | P0 | 手工 | 详情截图 |
| ADW-007 | 管理员Web | Monitor | 取消会话与删除会话 | 可操作会话存在 | 执行cancel和delete操作 | 状态变化正确，列表同步更新 | P0 | 手工 | 操作结果截图 |
| ADW-008 | 管理员Web | Debug | 调试问询与压缩/取消 | 可调试会话 | 在Debug页执行compaction/cancel | 指令成功，状态回显正确 | P1 | 手工 | Debug截图 |
| ADW-009 | 管理员Web | Settings | 系统配置保存 | 有可修改配置项 | 修改并保存system/security/default | 保存成功，刷新后值一致 | P0 | 手工 | 保存前后截图 |
| ADW-010 | 管理员Web | 组织管理 | 组织单元增删改查 | org_unit样本数据 | 新增/编辑/删除组织单元 | 列表同步更新，引用关系不紊乱 | P1 | 手工 | 组织模块截图 |
| ADW-011 | 管理员Web | 用户账户 | 账户列表与搜索 | >=20账号 | 按关键字搜索，翻页/刷新 | 结果准确，交互稳定 | P1 | 手工 | 搜索截图 |
| ADW-012 | 管理员Web | 用户账户 | 新建/编辑/删除账户 | 新增用户信息 | 执行新增、编辑、删除 | 各操作成功并持久化 | P0 | 手工 | CRUD截图 |
| ADW-013 | 管理员Web | 用户账户 | 用户密码重置 | 目标用户存在 | 重置密码后进行登录验证 | 新密码生效，旧密码失效 | P0 | 手工 | 重置截图 |
| ADW-014 | 管理员Web | 用户账户 | 用户工具权限配置 | 用户与Agent存在 | 修改tool_access并保存 | 权限变更立即生效 | P0 | 手工 | 权限截图 |
| ADW-015 | 管理员Web | 用户账户 | 测试数据seed/cleanup | 测试环境允许 | 执行seed后cleanup | 生成与清理均成功，无残留脏数据 | P1 | 手工+日志 | 执行日志 |
| ADW-016 | 管理员Web | 外链管理 | 外部链接管理 | 至少1条链接 | 新增、编辑、删除外链并校验可访问 | 链接可在用户侧打开；删除后不可见 | P1 | 手工 | 外链截图 |
| ADW-017 | 管理员Web | 渠道管理 | 渠道账号配置 | 准备有效/无效渠道参数 | 新增渠道账号，保存有效与无效配置 | 有效配置成功；无效配置有清晰错误 | P0 | 手工 | 渠道配置截图 |
| ADW-018 | 管理员Web | LLM配置 | 模型参数与上下文窗口保存 | LLM可访问 | 调整默认模型、context window并保存 | 保存成功，推理请求按新配置生效 | P0 | 手工+接口辅助 | 配置截图 |
| ADW-019 | 管理员Web | Memory | 记忆用户列表与开关 | memory开启 | 切换启用状态、清理指定用户记忆 | 状态和数据符合预期 | P1 | 手工 | Memory截图 |
| ADW-020 | 管理员Web | 工具管理 | 内置工具配置 | 工具清单存在 | 查看工具详情并保存配置 | 配置持久化，工具可调用 | P1 | 手工 | 工具截图 |
| ADW-021 | 管理员Web | Prompt模板 | 模板/文件/激活包管理 | prompt模板存在 | 编辑模板文件、切换激活模板 | 生效正确，错误可回滚 | P1 | 手工 | Prompt截图 |
| ADW-022 | 管理员Web | MCP | MCP服务配置与工具试调 | MCP服务样本 | 新增/修改MCP并执行工具调用测试 | 配置成功，调用返回正常 | P0 | 手工+接口辅助 | MCP截图 |
| ADW-023 | 管理员Web | Skills | 技能管理 | 准备zip技能包 | 上传/查看文件/编辑/删除技能 | 变更实时生效，列表一致 | P1 | 手工 | Skills截图 |
| ADW-024 | 管理员Web | Knowledge | 知识库文档与分块管理 | 准备知识文件 | 上传文件、查看doc/chunk、重嵌入、删除 | 全链路可用，无孤儿数据 | P0 | 手工 | Knowledge截图 |
| ADW-025 | 管理员Web | LSP | LSP配置与测试连通 | LSP参数可用 | 保存LSP配置并执行测试 | 测试结果成功，失败时提示明确 | P1 | 手工 | LSP截图 |
| ADW-026 | 管理员Web | A2A服务 | A2A服务读写 | A2A配置存在 | 加载/更新A2A服务与card配置 | 保存成功，刷新后一致 | P1 | 手工 | A2A截图 |
| ADW-027 | 管理员Web | Throughput | 压测任务控制与报告 | 压测场景配置完成 | 启动压测、观察状态、停止并查看报告 | 状态与报告闭环完整 | P1 | 手工 | Throughput截图 |
| ADW-028 | 管理员Web | Performance | 性能采样面板 | 系统运行中 | 拉取sample并查看图表 | 指标正常展示，无脚本错误 | P2 | 手工 | Performance截图 |
| ADW-029 | 管理员Web | Sim-Lab | 仿真实验项目与运行 | 已有实验模板 | 创建run、查看status、取消run | run生命周期正确 | P1 | 手工 | Sim-Lab截图 |
| ADW-030 | 管理员Web | Evaluation | 评测案例与流式评测 | 评测case存在 | 启动评测、观察流式输出、取消评测 | 进度与状态正确；取消可控 | P1 | 手工 | Evaluation截图 |
| ADW-031 | 管理员Web | 文档面板 | API文档渲染 | docs可访问 | 打开API Docs并浏览章节 | 文档可渲染，目录可定位 | P2 | 手工 | 文档截图 |
| ADW-032 | 管理员Web | 文档面板 | 论文面板渲染 | paper资源可访问 | 打开Paper并验证TOC跳转 | 目录与内容联动正确 | P2 | 手工 | Paper截图 |
| ADW-033 | 管理员Web | Workspace | 管理端工作区操作 | 工作区有测试文件 | 执行上传/新建/移动/下载/删除 | 文件结果正确，错误提示明确 | P1 | 手工 | Workspace截图 |
| ADW-034 | 管理员Web | i18n | 管理端语言切换 | 至少中英两种语言 | 切换语言并刷新 | 文案切换成功，请求头带`X-Wunder-Language` | P2 | 手工+接口辅助 | 语言截图 |

### 7.3 用户侧网页端（frontend）

| 用例ID | 端别 | 测试域 | 测试项目 | 前置条件/数据 | 操作步骤（人工） | 预期结果 / 通过标准 | 优先级 | 方式 | 证据 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| UW-001 | 用户网页 | 认证 | 注册与登录 | 新用户邮箱/用户名 | 完成注册后登录 | 返回个人主页，token写入本地 | P0 | 手工 | 注册登录截图 |
| UW-002 | 用户网页 | 认证 | Demo模式登录 | demo入口可用 | 进入`/demo`执行体验登录 | demo身份可用，退出后不污染正式身份 | P1 | 手工 | demo截图 |
| UW-003 | 用户网页 | 认证 | 嵌入鉴权参数处理 | 准备`wunder_token/access_token/wunder_code` | 通过带参URL进入系统 | 能自动换取/写入token，并清理鉴权query参数 | P0 | 手工 | URL前后截图 |
| UW-004 | 用户网页 | 路由守卫 | 未登录访问受限页面 | 清理access_token | 访问`/app/home` | 自动跳转`/login` | P0 | 手工 | 跳转截图 |
| UW-005 | 用户网页 | 路由守卫 | 分区路由映射 | 用户已登录 | 访问`/app/home/tools/cron/channels/workspace/settings/profile` | 跳转与section映射正确 | P1 | 手工 | 导航截图 |
| UW-006 | 用户网页 | 智能体 | 新建智能体 | 用户可操作Agent | 在agents区创建智能体 | 智能体卡片出现且可进入会话 | P0 | 手工 | 创建截图 |
| UW-007 | 用户网页 | 智能体 | 智能体设置保存与删除 | 已有Agent | 修改配置保存；执行删除 | 保存后生效；删除后会话清理 | P0 | 手工 | 设置截图 |
| UW-008 | 用户网页 | 聊天 | 流式消息发送（正常） | 会话存在 | 输入消息发送，观察增量输出 | 流式内容持续到完成，状态正确 | P0 | 手工 | 会话截图 |
| UW-009 | 用户网页 | 聊天 | 停止生成 | 长回答场景 | 发送后点击停止 | 生成终止，界面状态恢复可继续发送 | P0 | 手工 | 停止操作截图 |
| UW-010 | 用户网页 | 聊天 | 断线续传 | 人为断网后恢复 | 发送中断网再恢复，触发resume | 可从`after_event_id`续传，不重复拼接 | P0 | 手工+网络模拟 | 续传截图 |
| UW-011 | 用户网页 | 聊天 | WS优先与SSE兜底 | 可控制WS阻断 | 正常发消息后阻断WS再发消息 | 默认WS；阻断时自动切SSE且可用 | P0 | 手工+网络模拟 | 通道状态截图 |
| UW-012 | 用户网页 | 聊天 | 手工切换传输通道 | 可见transport开关 | 手工切换WS/SSE并刷新页面 | 选择持久化，刷新后保持 | P1 | 手工 | 设置截图 |
| UW-013 | 用户网页 | 审批流 | 工具审批-单次同意 | 准备需审批工具 | 触发审批，选择approve_once | 当前请求继续执行并结束 | P0 | 手工 | 审批弹窗截图 |
| UW-014 | 用户网页 | 审批流 | 工具审批-会话同意与拒绝 | 同上 | 触发审批分别选择approve_session/deny | 会话授权或拒绝逻辑正确，状态可见 | P0 | 手工 | 审批结果截图 |
| UW-015 | 用户网页 | 聊天流程 | 轮次与时间线展示 | 工具调用场景 | 发送触发模型+工具链 | 时间线包含模型轮次/工具事件/最终回复 | P0 | 手工 | 时间线截图 |
| UW-016 | 用户网页 | 统计 | token占用展示口径 | 有多轮会话 | 对比消息统计显示 | 展示“token占用/上下文占用”，口径一致 | P0 | 手工+日志核验 | 统计截图 |
| UW-017 | 用户网页 | 会话聚合 | 混合会话列表聚合 | 含Agent/私聊/群聊 | 观察消息主区会话列表排序与未读 | 三类会话可聚合、排序正确 | P1 | 手工 | 列表截图 |
| UW-018 | 用户网页 | 用户世界 | 联系人与会话创建 | 至少2个用户 | 从联系人发起会话 | 会话创建成功并可收发消息 | P0 | 手工 | 联系人截图 |
| UW-019 | 用户网页 | 用户世界 | 群聊创建与公告编辑 | 3个以上用户 | 创建群组并编辑公告 | 群信息与公告保存成功 | P0 | 手工 | 群聊截图 |
| UW-020 | 用户网页 | 用户世界 | 消息发送乐观更新与回执 | 正常网络 + 失败网络 | 发送消息后观察本地回执；制造失败重试 | 成功时替换乐观消息；失败时提示且不脏数据 | P0 | 手工 | 发送截图 |
| UW-021 | 用户网页 | 用户世界 | 已读回执与未读计数 | 产生未读消息 | 切换会话并标记已读 | 未读数清零，列表同步更新 | P0 | 手工 | 未读变化截图 |
| UW-022 | 用户网页 | 用户世界 | 实时监听WS/SSE降级 | 可阻断WS | 开启会话监听并阻断WS | 自动降级SSE，消息连续可接收 | P0 | 手工+网络模拟 | 通道切换截图 |
| UW-023 | 用户网页 | 用户世界 | 无权限兜底 | 账号限制user_world权限 | 打开用户世界模块 | 显示权限受限提示，不出现崩溃 | P0 | 手工 | 提示截图 |
| UW-024 | 用户网页 | 用户世界 | 历史消息检索与定位 | 有历史消息与附件 | 打开历史弹窗，按关键词/日期/分类筛选并定位 | 筛选准确，可定位到对应消息 | P1 | 手工 | 历史弹窗截图 |
| UW-025 | 用户网页 | 工作区 | 文件树与搜索 | 多层级目录 | 进入files区，展开目录并搜索 | 列表、层级、搜索结果正确 | P0 | 手工 | 工作区截图 |
| UW-026 | 用户网页 | 工作区 | 上传（多文件/大文件限制） | 准备不同大小文件 | 执行多文件上传与超限上传 | 正常文件成功；超限阻止并提示 | P0 | 手工 | 上传截图 |
| UW-027 | 用户网页 | 工作区 | 新建文件/文件夹 | 当前目录可写 | 新建文件与目录 | 创建成功并即时显示 | P1 | 手工 | 新建截图 |
| UW-028 | 用户网页 | 工作区 | 重命名/移动/复制/删除（单个+批量） | 准备批量样本 | 执行多种批量动作 | 结果与提示一致，无误删误移 | P0 | 手工 | 批量操作截图 |
| UW-029 | 用户网页 | 工作区 | 拖拽上传与拖拽移动 | 浏览器支持拖拽 | 目录拖入文件；文件拖入目录 | 复制/移动行为正确，非法场景有拦截 | P1 | 手工 | 拖拽截图 |
| UW-030 | 用户网页 | 工作区 | 下载文件与目录打包下载 | 文件/目录存在 | 下载单文件和archive | 下载成功，文件完整可打开 | P0 | 手工 | 下载结果 |
| UW-031 | 用户网页 | 工作区 | 预览与编辑 | 文本/图片/PDF/SVG样本 | 打开预览、编辑文本并保存 | 对应类型可预览；文本保存成功 | P0 | 手工 | 预览编辑截图 |
| UW-032 | 用户网页 | 用户工具 | MCP服务器管理与工具拉取 | 准备MCP配置 | 新增/编辑MCP并拉取工具 | 连接成功，工具列表可见 | P1 | 手工 | MCP面板截图 |
| UW-033 | 用户网页 | 用户工具 | 技能上传与文件管理 | 准备技能zip | 上传技能，读取文件，编辑保存，删除技能 | 操作成功且即时生效 | P1 | 手工 | 技能面板截图 |
| UW-034 | 用户网页 | 用户工具 | 知识库上传、重建索引、测试检索 | 准备知识文档 | 上传文档，重建索引，执行test query | 文档入库成功，检索有结果 | P0 | 手工 | 知识库截图 |
| UW-035 | 用户网页 | 用户工具 | 共享工具开关 | 有共享工具策略 | 修改共享工具并保存 | 保存成功，聊天工具可见性变化正确 | P1 | 手工 | 共享工具截图 |
| UW-036 | 用户网页 | 渠道 | 渠道账号新增/编辑/删除 | 有可用渠道参数 | 创建账号并编辑保存，最后删除 | 账号生命周期正确，错误提示清晰 | P0 | 手工 | 渠道截图 |
| UW-037 | 用户网页 | 定时任务 | 定时任务创建与运行 | Agent存在 | 创建一次性/重复任务，启停并手工run | 任务状态、run历史正确 | P1 | 手工 | Cron截图 |
| UW-038 | 用户网页 | 外链应用 | 外部应用页加载与返回 | 预置external link | 打开`/app/external/:id`并使用浮动按钮返回 | iframe可加载；拖动按钮后仍可返回 | P1 | 手工 | 外链截图 |
| UW-039 | 用户网页 | 设置 | 个人信息与偏好项 | 用户已登录 | 修改资料、发送键、字体大小等 | 保存成功，刷新后保持 | P1 | 手工 | 设置截图 |
| UW-040 | 用户网页 | 主题 | 浅色/深色与配色切换 | 默认主题可用 | 切换light/dark与配色主题 | 全局颜色匹配，无不可读文本 | P1 | 手工 | 主题截图 |
| UW-041 | 用户网页 | 性能模式 | 省电模式切换 | 可见性能开关 | 切换low/high并观察动效与滚动 | 低性能模式动效降级，交互正常 | P2 | 手工 | 模式截图 |
| UW-042 | 用户网页 | 异常兜底 | 维护模式遮罩 | 模拟502/503/504 | 触发维护状态后刷新 | 出现维护遮罩与刷新按钮，恢复后自动可用 | P0 | 手工+接口模拟 | 维护截图 |
| UW-043 | 用户网页 | 会话安全 | 退出登录清理 | 已登录 | 执行logout后刷新 | token清除，跳转登录页，受限路由不可进 | P0 | 手工 | 退出截图 |
| UW-044 | 用户网页 | 文件引用 | 群聊发送时@路径文件处理 | 用户世界+工作区文件存在 | 在发送内容中引用路径文件并发送 | 文件能被识别并发送，失败时给出原因 | P1 | 手工 | 发送回执截图 |

### 7.4 用户侧桌面端（桌面壳 + 桌面模式业务）

| 用例ID | 端别 | 测试域 | 测试项目 | 前置条件/数据 | 操作步骤（人工） | 预期结果 / 通过标准 | 优先级 | 方式 | 证据 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| UD-001 | 桌面端 | 安装启动 | 安装、首次启动、单实例 | 安装包可用 | 安装后启动两次应用 | 首次正常启动，第二次聚焦已开窗口 | P0 | 手工 | 启动截图 |
| UD-002 | 桌面端 | Bridge启动 | Bridge与前端引导可用 | 本地环境正常 | 启动后检查页面加载与`/config.json` | 页面进入消息页，runtime配置可读 | P0 | 手工+接口辅助 | config截图 |
| UD-003 | 桌面端 | 本地鉴权 | 本地token注入与本地模式访问 | 清空浏览器存储 | 启动桌面并打开业务页面 | 自动可用，无需手工登录远端 | P0 | 手工 | 登录态截图 |
| UD-004 | 桌面端 | 远程模式 | 连接远程服务并跳转登录 | 有可用远程地址 | 在桌面设置填写远程地址并连接 | 切换到远程认证，跳转`/login` | P0 | 手工 | 连接截图 |
| UD-005 | 桌面端 | 远程模式 | 断开远程恢复本地模式 | 已处于远程模式 | 点击断开远程服务 | 恢复本地token，回到`/desktop/home` | P0 | 手工 | 断开截图 |
| UD-006 | 桌面端 | 运行态展示 | 标题栏运行状态文案 | 可在本地/远程切换 | 切换模式观察标题栏状态 | 显示“本地模式/端云协同模式”并实时变化 | P1 | 手工 | 标题栏截图 |
| UD-007 | 桌面端 | 窗口控制 | 最小化/最大化/还原/关闭 | Electron壳可用 | 点击窗口按钮并双击标题栏 | 窗口行为正确，无卡死 | P0 | 手工 | 窗口操作录像 |
| UD-008 | 桌面端 | 拖拽区域 | 自定义标题栏拖拽 | 非全屏状态 | 按住标题栏拖拽窗口 | 可移动窗口，控件区不触发误拖拽 | P1 | 手工 | 拖拽录像 |
| UD-009 | 桌面端 | 在线更新 | 检查更新状态机 | 打包环境 + 更新源可控 | 执行检查更新并观察各状态 | `checking/available/downloading/downloaded/installing/error` 状态转换合理 | P1 | 手工 | 更新截图 |
| UD-010 | 桌面端 | 目录选择 | 原生目录选择器与回退 | Electron preload可用 | 在容器管理中点击浏览目录；模拟桥接失败 | 优先系统目录选择；失败时回退内置浏览器 | P0 | 手工 | 目录选择截图 |
| UD-011 | 桌面端 | 容器管理 | 容器0~10映射与重复路径校验 | 多个本地目录 | 为不同容器设置路径并尝试重复路径 | 重复路径被阻止；保存后生效并持久化 | P0 | 手工 | 容器配置截图 |
| UD-012 | 桌面端 | 工作区映射 | 容器映射影响文件读写 | 已设置容器路径 | 在不同容器进行上传/下载/预览 | 文件落在正确目录，不串容器 | P0 | 手工 | 目录与界面对照 |
| UD-013 | 桌面端 | 模型配置 | 模型增删改与默认模型设置 | 桌面系统设置可用 | 新增llm/embedding模型，设置默认，保存 | 保存成功，默认值正确校验 | P0 | 手工 | 模型设置截图 |
| UD-014 | 桌面端 | 模型校验 | 模型键唯一和必填校验 | 构造重复key/缺字段 | 保存设置 | 重复key、缺base_url/model会拦截并提示 | P0 | 手工 | 校验提示截图 |
| UD-015 | 桌面端 | 工具调用模式 | per-model tool_call_mode 生效 | 至少2个模型 | 分别设置tool_call/function_call并发起请求 | 请求按所选模型策略执行，不使用全局覆盖 | P1 | 手工+日志核验 | 请求日志截图 |
| UD-016 | 桌面端 | 首次体验 | 首次启动默认智能体提示 | 清空首次标记存储 | 首次进入桌面消息页 | 显示默认引导提示；再次启动不重复 | P2 | 手工 | 首次/二次截图 |
| UD-017 | 桌面端 | 业务一致性 | 桌面模式与网页功能一致性 | 同一账号 | 对比消息/工具/文件/设置等核心流程 | 主流程与网页一致，无功能缺口 | P0 | 手工 | 对照截图 |
| UD-018 | 桌面端 | 安全防护 | 本地token防护 | 获取无token请求条件 | 直接请求`/wunder/*`不带token | 返回401；带正确desktop token成功 | P0 | 手工+接口辅助 | 请求结果截图 |
| UD-019 | 桌面端 | 异常恢复 | Bridge异常退出处理 | 可模拟bridge退出 | 运行中杀掉bridge进程 | 桌面提示错误并安全退出，不挂死 | P0 | 手工 | 错误弹窗截图 |
| UD-020 | 桌面端 | 资源缺失 | 前端资源缺失兜底 | 人为移除dist资源 | 启动桌面 | 返回前端资源缺失提示，不出现白屏死循环 | P1 | 手工 | 错误页面截图 |
| UD-021 | 桌面端 | 远程地址校验 | 无效远程地址处理 | 准备非法URL | 输入非法地址连接 | 连接失败并提示，不污染当前可用状态 | P0 | 手工 | 错误提示截图 |
| UD-022 | 桌面端 | 数据持久化 | 设置与容器路径跨重启持久化 | 已保存设置 | 重启应用 | 配置保持一致，立即可用 | P0 | 手工 | 重启前后截图 |
| UD-023 | 桌面端 | 桌面身份 | 本地默认用户与token长期可用 | 新环境首次启动 | 首次启动后检查本地身份、再隔天复测 | 用户身份可持续使用，不频繁失效 | P1 | 手工 | 身份信息截图 |
| UD-024 | 桌面端 | Linux集成（如发行） | Linux桌面入口与图标 | Linux AppImage包 | 启动后检查desktop entry/图标 | 桌面菜单与快捷方式可用，图标正常 | P2 | 手工 | 桌面环境截图 |

### 7.5 跨端非功能与稳定性

| 用例ID | 端别 | 测试域 | 测试项目 | 前置条件/数据 | 操作步骤（人工） | 预期结果 / 通过标准 | 优先级 | 方式 | 证据 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| NF-001 | 跨端 | 兼容性 | 浏览器兼容（Chrome/Edge/Firefox） | 同一版本服务端 | 在三浏览器执行P0流程 | 功能可用，UI无致命错位 | P0 | 手工 | 三浏览器截图 |
| NF-002 | 跨端 | 兼容性 | 桌面系统兼容（Win/Linux/mac） | 对应安装包可用 | 各OS执行启动+聊天+文件P0 | 主流程全可用 | P0 | 手工 | 各OS截图 |
| NF-003 | 跨端 | 稳定性 | 长稳运行（24h） | 持续消息与文件操作脚本辅助 | 保持会话/监控运行24h | 无内存爆涨、无服务崩溃 | P0 | 手工+监控辅助 | 资源曲线 |
| NF-004 | 跨端 | 通讯 | WS受限时SSE兜底 | 可模拟代理阻断WS | 执行聊天和用户世界实时场景 | 两条链路可自动切换并恢复 | P0 | 手工+网络模拟 | 通道日志 |
| NF-005 | 跨端 | 性能 | 大联系人列表滚动性能 | 1000+联系人 | 用户世界联系人列表快速滚动 | 不卡死，滚动流畅，交互可响应 | P1 | 手工 | 性能录屏 |
| NF-006 | 跨端 | 性能 | 大目录文件操作性能 | 1000+文件目录 | 搜索、展开、批量移动/删除 | 操作可完成，耗时在可接受范围 | P1 | 手工 | 操作耗时记录 |
| NF-007 | 跨端 | 安全 | 输入安全与XSS拦截 | 特殊脚本输入样本 | 在消息、用户名、文件名等输入脚本 | 前端不执行恶意脚本，内容被安全展示 | P0 | 手工 | 安全验证截图 |
| NF-008 | 跨端 | 权限 | 管理接口越权防护 | 普通用户token | 访问`/admin/*`接口与页面 | 返回401/403，前端不泄露敏感信息 | P0 | 手工+接口辅助 | 接口结果 |
| NF-009 | 跨端 | 观测性 | 异常提示与日志可追踪 | 人为制造5类错误 | 触发错误并收集前端提示与后端日志 | 用户提示可理解，日志可定位问题 | P1 | 手工+日志核验 | 日志片段 |
| NF-010 | 跨端 | 数据可靠性 | 重启恢复与数据持久化 | 有会话、设置、文件操作记录 | 服务端与客户端分别重启后复查 | 会话/配置/文件索引不丢失 | P0 | 手工 | 重启前后对照 |

## 8. 执行与记录模板（建议）

### 8.1 单用例执行记录

| 字段 | 填写说明 |
| --- | --- |
| 用例ID | 对应本大纲中的用例编号 |
| 执行人 | 测试人员姓名 |
| 执行时间 | 开始/结束时间 |
| 环境 | 服务版本、浏览器或OS、网络条件 |
| 实际结果 | 通过/失败/阻塞 + 简述 |
| 证据 | 截图、录屏、日志链接 |
| 缺陷ID | 若失败，关联缺陷单编号 |

### 8.2 每日测试汇总

| 维度 | 统计项 |
| --- | --- |
| 进度 | 已执行/总用例；P0通过率；P1通过率 |
| 质量 | 新增缺陷数（S1~S4）；已关闭缺陷数；遗留风险 |
| 风险 | 当日阻塞项、资源缺口、是否影响上线日期 |

## 9. 上线放行建议

- 必须满足：P0全通过、无S1/S2遗留、WS/SSE双链路通过、桌面本地/远程双模式通过、工作区核心操作通过。
- 建议满足：P1通过率不低于95%，管理端关键模块（监控、配置、用户、工具）无阻断缺陷。
- 若带问题上线：仅允许S3/S4且需有明确规避方案、回滚方案和修复排期。

---

如需进一步落地，可在本大纲基础上继续拆解为：  
1) 逐日执行清单；2) 缺陷模板与优先级SLA；3) 回归最小用例集（每次发版1小时可跑完）。
