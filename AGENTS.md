# 仓库指南

- wunder 是一个智能体调度平台，可灵活对接大模型api，mcp工具与skills流程
- 核心理念是对开发者来说一切都是接口，对大模型来说一切皆工具
- 基于 Rust Axum 最终暴露出 /wunder端口 需要用户id和用户问题，可流式返回中间过程和最终回复
- wunder内置了一组必要的工具链用于基本操作，例如读文件，写文件，编辑文件，搜索内容，列出文件，替换内容，执行命令，ptc等工具
- wunder可供多人并发访问，系统会为不同id用户开辟一块空间作为工作区，这些工作区将持久化
- 注意保持优雅的项目结构和模块组成
- 始终要考虑系统的运行效率，速度要快，内存占用要低
- 每次完成任务，将实现的内容简洁写入到docs/功能迭代.md中，直接运行我为你准备好的脚本 python scripts/update_feature_log.py 写入要记录的内容。
- 如果系统结构有变化要及时更新docs/设计方案.md和docs/API文档.md和docs/系统介绍.md
- 不要尝试创建git分支或提交，这些交给用户
- 不要主动使用git除非必须，你git diff时可能会遇到出现了不是你修改的内容，没关系那是用户自己改的不用管他
- 当前开发处于原型阶段，数据库等不需要考虑对之前的兼容性，老旧的代码直接删除即可
- 注意系统中对token的统计，记录的是token占用量即实际的上下文占用而不是总的消耗量。
- 确保系统能流畅稳定运行10年以上

## Rust 开发提示

- format! 中可以内联变量时使用 `{var}`，避免额外参数。
- 能合并的 if 语句请合并（clippy::collapsible_if）。
- 能用方法引用时优先用方法引用，减少多余闭包（clippy::redundant_closure_for_method_calls）。
- 测试中优先对完整对象做 `assert_eq!`，避免逐字段对比。
- Rust 代码变更后优先运行 `cargo fmt`，必要时运行 `cargo clippy`。
- 涉及新增/变更 API 时同步更新 docs/ 相关文档。
